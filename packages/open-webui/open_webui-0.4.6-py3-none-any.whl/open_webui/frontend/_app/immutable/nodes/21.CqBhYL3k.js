import{s as $e,E as Ve,F as Fe,a as y,d as u,f,i as N,g as v,n as te,e as w,c as b,R as Dt,B as We,k as q,o as R,y as ue,A as de,p as Ae,j as Te,I as Ue,u as re,t as ie,b as ce,h as fe,C as ye,z as xt,H as Ne,q as Vt,O as Ft,l as Oe}from"../chunks/scheduler.Cy0XlzB3.js";import{S as Ee,i as Ie,t as x,g as ge,c as ve,a as F,b as W,d as A,m as U,e as L,f as pe}from"../chunks/index.DFpEjgiy.js";import{F as Ct}from"../chunks/fuse.CU2r43ac.js";import{t as G}from"../chunks/Toaster.svelte_svelte_type_style_lang.Bke5K-AV.js";import{A as Tt,P as Nt,a as Qe,D as St,b as zt}from"../chunks/Drawer.D5vvm0I-.js";import{g as Mt}from"../chunks/entry.CXYLofHl.js";import{p as Bt}from"../chunks/stores.Wik0TTgp.js";import{s as Pt,k as Wt}from"../chunks/index.BCNxQF8k.js";import{u as At,a as Ut,E as Lt}from"../chunks/EllipsisVertical.CDg-8tuf.js";import{b as jt,r as Ot,e as Kt,f as Ht,u as qt,h as Rt,g as Xt}from"../chunks/index.l5fQOTRU.js";import{t as Yt}from"../chunks/index.B_NY7Up4.js";import{m as Ke,v as Gt}from"../chunks/index.j54b5sGw.js";import{S as Jt}from"../chunks/Spinner.Cv-PMISb.js";import{e as He}from"../chunks/each.DfEv0HRi.js";import{F as Qt}from"../chunks/FileItem.DHx-wDSy.js";import"../chunks/updater.Cgr-AqlS.js";import{D as Zt,M as Be}from"../chunks/Dropdown.BD-cBgwU.js";import{b as el}from"../chunks/menu-trigger.C3VqXLCz.js";import{f as tl}from"../chunks/index.DyIcjikr.js";import{T as Pe}from"../chunks/Tooltip.BEo7fKCr.js";import{F as ll}from"../chunks/FolderOpen.CPLFUxKN.js";import"../chunks/dayjs.min.CnqrW7zs.js";import{M as rl}from"../chunks/Modal.BeA4vhUE.js";import{R as Le,V as nl}from"../chunks/RichTextInput.DwrkHzWj.js";import{X as sl}from"../chunks/XMark.D6mOlP4z.js";import{M as ol}from"../chunks/Mic.B-DNKVBh.js";import{C as al}from"../chunks/ConfirmDialog.CfjT9LPS.js";import{C as Ze}from"../chunks/ChevronLeft.BCvbEsT0.js";import{A as il,L as cl}from"../chunks/AccessControlModal.DAIgqTu4.js";function fl(n){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(l){e=Fe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=y(e);t=Fe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(u),r.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",n[1]),f(e,"stroke","currentColor"),f(e,"class",n[0])},m(l,r){N(l,e,r),v(e,t)},p(l,[r]){r&2&&f(e,"stroke-width",l[1]),r&1&&f(e,"class",l[0])},i:te,o:te,d(l){l&&u(e)}}}function ul(n,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,r=s.strokeWidth)},[l,r]}class dl extends Ee{constructor(e){super(),Ie(this,e,ul,fl,$e,{className:0,strokeWidth:1})}}function qe(n,e,t){const l=n.slice();return l[5]=e[t],l}function Re(n){var a,i,c,_,$,p;let e,t,l,r;function s(){return n[3](n[5])}function o(){return n[4](n[5])}return t=new Qt({props:{className:"w-full",colorClassName:(n[0]===n[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",file:n[5],name:((a=n[5])==null?void 0:a.name)??((c=(i=n[5])==null?void 0:i.meta)==null?void 0:c.name),type:"file",size:((_=n[5])==null?void 0:_.size)??((p=($=n[5])==null?void 0:$.meta)==null?void 0:p.size)??"",loading:n[5].status==="uploading",dismissible:!0}}),t.$on("click",s),t.$on("dismiss",o),{c(){e=w("div"),W(t.$$.fragment),l=q(),this.h()},l(m){e=b(m,"DIV",{class:!0});var E=y(e);A(t.$$.fragment,E),l=R(E),E.forEach(u),this.h()},h(){f(e,"class","mt-1 px-2")},m(m,E){N(m,e,E),U(t,e,null),v(e,l),r=!0},p(m,E){var D,z,j,V,I,C;n=m;const k={};E&3&&(k.colorClassName=(n[0]===n[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),E&2&&(k.file=n[5]),E&2&&(k.name=((D=n[5])==null?void 0:D.name)??((j=(z=n[5])==null?void 0:z.meta)==null?void 0:j.name)),E&2&&(k.size=((V=n[5])==null?void 0:V.size)??((C=(I=n[5])==null?void 0:I.meta)==null?void 0:C.size)??""),E&2&&(k.loading=n[5].status==="uploading"),t.$set(k)},i(m){r||(x(t.$$.fragment,m),r=!0)},o(m){F(t.$$.fragment,m),r=!1},d(m){m&&u(e),L(t)}}}function pl(n){let e,t,l=He(n[1]),r=[];for(let o=0;o<l.length;o+=1)r[o]=Re(qe(n,l,o));const s=o=>F(r[o],1,1,()=>{r[o]=null});return{c(){e=w("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var a=y(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){f(e,"class","max-h-full flex flex-col w-full")},m(o,a){N(o,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(o,[a]){if(a&7){l=He(o[1]);let i;for(i=0;i<l.length;i+=1){const c=qe(o,l,i);r[i]?(r[i].p(c,a),x(r[i],1)):(r[i]=Re(c),r[i].c(),x(r[i],1),r[i].m(e,null))}for(ge(),i=l.length;i<r.length;i+=1)s(i);ve()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)x(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)F(r[a]);t=!1},d(o){o&&u(e),Dt(r,o)}}}function ml(n,e,t){const l=We();let{selectedFileId:r=null}=e,{files:s=[]}=e;const o=i=>{i.status!=="uploading"&&l("click",i.id)},a=i=>{i.status!=="uploading"&&l("delete",i.id)};return n.$$set=i=>{"selectedFileId"in i&&t(0,r=i.selectedFileId),"files"in i&&t(1,s=i.files)},[r,s,l,o,a]}class hl extends Ee{constructor(e){super(),Ie(this,e,ml,pl,$e,{selectedFileId:0,files:1})}}function _l(n){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(l){e=Fe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=y(e);t=Fe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(u),r.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",n[1]),f(e,"stroke","currentColor"),f(e,"class",n[0])},m(l,r){N(l,e,r),v(e,t)},p(l,[r]){r&2&&f(e,"stroke-width",l[1]),r&1&&f(e,"class",l[0])},i:te,o:te,d(l){l&&u(e)}}}function gl(n,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,r=s.strokeWidth)},[l,r]}class vl extends Ee{constructor(e){super(),Ie(this,e,gl,_l,$e,{className:0,strokeWidth:1})}}function $l(n){let e,t;return{c(){e=Ve("svg"),t=Ve("path"),this.h()},l(l){e=Fe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=y(e);t=Fe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(u),r.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",n[1]),f(e,"stroke","currentColor"),f(e,"class",n[0])},m(l,r){N(l,e,r),v(e,t)},p(l,[r]){r&2&&f(e,"stroke-width",l[1]),r&1&&f(e,"class",l[0])},i:te,o:te,d(l){l&&u(e)}}}function wl(n,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return n.$$set=s=>{"className"in s&&t(0,l=s.className),"strokeWidth"in s&&t(1,r=s.strokeWidth)},[l,r]}class bl extends Ee{constructor(e){super(),Ie(this,e,wl,$l,$e,{className:0,strokeWidth:1})}}function kl(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=w("button"),e.innerHTML=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){f(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(s,o){N(s,e,o),l||(r=re(e,"click",n[9]),l=!0)},p:te,d(s){s&&u(e),l=!1,r()}}}function yl(n){let e,t;return e=new Pe({props:{content:n[2].t("Add Content"),$$slots:{default:[kl]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p(l,r){const s={};r&4&&(s.content=l[2].t("Add Content")),r&4098&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function El(n){let e,t,l,r=n[2].t("Upload files")+"",s,o;return e=new dl({props:{strokeWidth:"2"}}),{c(){W(e.$$.fragment),t=q(),l=w("div"),s=ie(r),this.h()},l(a){A(e.$$.fragment,a),t=R(a),l=b(a,"DIV",{class:!0});var i=y(l);s=ce(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){U(e,a,i),N(a,t,i),N(a,l,i),v(l,s),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload files")+"")&&fe(s,r)},i(a){o||(x(e.$$.fragment,a),o=!0)},o(a){F(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),L(e,a)}}}function Il(n){let e,t,l,r=n[2].t("Upload directory")+"",s,o;return e=new ll({props:{strokeWidth:"2"}}),{c(){W(e.$$.fragment),t=q(),l=w("div"),s=ie(r),this.h()},l(a){A(e.$$.fragment,a),t=R(a),l=b(a,"DIV",{class:!0});var i=y(l);s=ce(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){U(e,a,i),N(a,t,i),N(a,l,i),v(l,s),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&fe(s,r)},i(a){o||(x(e.$$.fragment,a),o=!0)},o(a){F(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),L(e,a)}}}function Dl(n){let e,t,l,r=n[2].t("Sync directory")+"",s,o;return e=new bl({props:{strokeWidth:"2"}}),{c(){W(e.$$.fragment),t=q(),l=w("div"),s=ie(r),this.h()},l(a){A(e.$$.fragment,a),t=R(a),l=b(a,"DIV",{class:!0});var i=y(l);s=ce(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){U(e,a,i),N(a,t,i),N(a,l,i),v(l,s),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&fe(s,r)},i(a){o||(x(e.$$.fragment,a),o=!0)},o(a){F(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),L(e,a)}}}function xl(n){let e,t;return e=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Dl]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p(l,r){const s={};r&4100&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Vl(n){let e,t,l,r=n[2].t("Add text content")+"",s,o;return e=new vl({props:{strokeWidth:"2"}}),{c(){W(e.$$.fragment),t=q(),l=w("div"),s=ie(r),this.h()},l(a){A(e.$$.fragment,a),t=R(a),l=b(a,"DIV",{class:!0});var i=y(l);s=ce(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){U(e,a,i),N(a,t,i),N(a,l,i),v(l,s),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Add text content")+"")&&fe(s,r)},i(a){o||(x(e.$$.fragment,a),o=!0)},o(a){F(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),L(e,a)}}}function Fl(n){let e,t,l,r,s,o,a,i;return e=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[El]},$$scope:{ctx:n}}}),e.$on("click",n[5]),l=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Il]},$$scope:{ctx:n}}}),l.$on("click",n[6]),s=new Pe({props:{content:n[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[xl]},$$scope:{ctx:n}}}),a=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vl]},$$scope:{ctx:n}}}),a.$on("click",n[8]),{c(){W(e.$$.fragment),t=q(),W(l.$$.fragment),r=q(),W(s.$$.fragment),o=q(),W(a.$$.fragment)},l(c){A(e.$$.fragment,c),t=R(c),A(l.$$.fragment,c),r=R(c),A(s.$$.fragment,c),o=R(c),A(a.$$.fragment,c)},m(c,_){U(e,c,_),N(c,t,_),U(l,c,_),N(c,r,_),U(s,c,_),N(c,o,_),U(a,c,_),i=!0},p(c,_){const $={};_&4100&&($.$$scope={dirty:_,ctx:c}),e.$set($);const p={};_&4100&&(p.$$scope={dirty:_,ctx:c}),l.$set(p);const m={};_&4&&(m.content=c[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(m.$$scope={dirty:_,ctx:c}),s.$set(m);const E={};_&4100&&(E.$$scope={dirty:_,ctx:c}),a.$set(E)},i(c){i||(x(e.$$.fragment,c),x(l.$$.fragment,c),x(s.$$.fragment,c),x(a.$$.fragment,c),i=!0)},o(c){F(e.$$.fragment,c),F(l.$$.fragment,c),F(s.$$.fragment,c),F(a.$$.fragment,c),i=!1},d(c){c&&(u(t),u(r),u(o)),L(e,c),L(l,c),L(s,c),L(a,c)}}}function Cl(n){let e,t,l;return t=new el({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:4,side:"bottom",align:"end",transition:tl,$$slots:{default:[Fl]},$$scope:{ctx:n}}}),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{slot:!0});var s=y(e);A(t.$$.fragment,s),s.forEach(u),this.h()},h(){f(e,"slot","content")},m(r,s){N(r,e,s),U(t,e,null),l=!0},p(r,s){const o={};s&4100&&(o.$$scope={dirty:s,ctx:r}),t.$set(o)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),L(t)}}}function Tl(n){let e,t,l;function r(o){n[10](o)}let s={align:"end",$$slots:{content:[Cl],default:[yl]},$$scope:{ctx:n}};return n[1]!==void 0&&(s.show=n[1]),e=new Zt({props:s}),ue.push(()=>pe(e,"show",r)),e.$on("change",n[11]),{c(){W(e.$$.fragment)},l(o){A(e.$$.fragment,o)},m(o,a){U(e,o,a),l=!0},p(o,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:o}),!t&&a&2&&(t=!0,i.show=o[1],de(()=>t=!1)),e.$set(i)},i(o){l||(x(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Nl(n,e,t){let l;const r=We(),s=Ae("i18n");Te(n,s,k=>t(2,l=k));let{onClose:o=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},c=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},$=()=>{r("upload",{type:"text"})},p=k=>{k.stopPropagation(),t(1,a=!0)};function m(k){a=k,t(1,a)}const E=k=>{k.detail===!1&&o()};return n.$$set=k=>{"onClose"in k&&t(0,o=k.onClose)},[o,a,l,r,s,i,c,_,$,p,m,E]}class Sl extends Ee{constructor(e){super(),Ie(this,e,Nl,Tl,$e,{onClose:0})}}function zl(n){let e,t;return e=new Pe({props:{content:n[4].t("Voice Input"),$$slots:{default:[Bl]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p(l,r){const s={};r&16&&(s.content=l[4].t("Voice Input")),r&65560&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Ml(n){let e,t,l,r;function s(a){n[10](a)}let o={className:"p-1"};return n[3]!==void 0&&(o.recording=n[3]),t=new nl({props:o}),ue.push(()=>pe(t,"recording",s)),t.$on("cancel",n[11]),t.$on("confirm",n[12]),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var i=y(e);A(t.$$.fragment,i),i.forEach(u),this.h()},h(){f(e,"class","max-w-full w-64")},m(a,i){N(a,e,i),U(t,e,null),r=!0},p(a,i){const c={};!l&&i&8&&(l=!0,c.recording=a[3],de(()=>l=!1)),t.$set(c)},i(a){r||(x(t.$$.fragment,a),r=!0)},o(a){F(t.$$.fragment,a),r=!1},d(a){a&&u(e),L(t)}}}function Bl(n){let e,t,l,r,s;return t=new ol({props:{className:"size-5"}}),{c(){e=w("button"),W(t.$$.fragment),this.h()},l(o){e=b(o,"BUTTON",{class:!0,type:!0});var a=y(e);A(t.$$.fragment,a),a.forEach(u),this.h()},h(){f(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),f(e,"type","button")},m(o,a){N(o,e,a),U(t,e,null),l=!0,r||(s=re(e,"click",n[13]),r=!0)},p:te,i(o){l||(x(t.$$.fragment,o),l=!0)},o(o){F(t.$$.fragment,o),l=!1},d(o){o&&u(e),L(t),r=!1,s()}}}function Pl(n){let e,t=n[4].t("Save")+"",l;return{c(){e=w("button"),l=ie(t),this.h()},l(r){e=b(r,"BUTTON",{class:!0,type:!0});var s=y(e);l=ce(s,t),s.forEach(u),this.h()},h(){f(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),f(e,"type","submit")},m(r,s){N(r,e,s),v(e,l)},p(r,s){s&16&&t!==(t=r[4].t("Save")+"")&&fe(l,t)},d(r){r&&u(e)}}}function Wl(n){let e,t,l,r,s,o,a,i,c,_,$,p,m,E,k,D,z,j,V,I,C,S,H,d,g,M,X;l=new sl({props:{className:"size-3.5"}});function J(B){n[9](B)}let le={placeholder:n[4].t("Write something...")};n[2]!==void 0&&(le.value=n[2]),k=new Le({props:le}),ue.push(()=>pe(k,"value",J));const ne=[Ml,zl],T=[];function Q(B,Y){return B[3]?0:1}return I=Q(n),C=T[I]=ne[I](n),d=new Pe({props:{content:n[4].t("Save"),$$slots:{default:[Pl]},$$scope:{ctx:n}}}),{c(){e=w("div"),t=w("button"),W(l.$$.fragment),r=q(),s=w("div"),o=w("form"),a=w("div"),i=w("div"),c=w("div"),_=w("div"),$=w("input"),m=q(),E=w("div"),W(k.$$.fragment),z=q(),j=w("div"),V=w("div"),C.c(),S=q(),H=w("div"),W(d.$$.fragment),this.h()},l(B){e=b(B,"DIV",{class:!0});var Y=y(e);t=b(Y,"BUTTON",{class:!0,type:!0});var se=y(t);A(l.$$.fragment,se),se.forEach(u),Y.forEach(u),r=R(B),s=b(B,"DIV",{class:!0});var ae=y(s);o=b(ae,"FORM",{class:!0});var oe=y(o);a=b(oe,"DIV",{class:!0});var me=y(a);i=b(me,"DIV",{class:!0});var he=y(i);c=b(he,"DIV",{class:!0});var be=y(c);_=b(be,"DIV",{class:!0});var De=y(_);$=b(De,"INPUT",{class:!0,type:!0,placeholder:!0}),De.forEach(u),be.forEach(u),m=R(he),E=b(he,"DIV",{class:!0});var Se=y(E);A(k.$$.fragment,Se),Se.forEach(u),he.forEach(u),me.forEach(u),z=R(oe),j=b(oe,"DIV",{class:!0});var xe=y(j);V=b(xe,"DIV",{class:!0});var ze=y(V);C.l(ze),ze.forEach(u),S=R(xe),H=b(xe,"DIV",{class:!0});var Me=y(H);A(d.$$.fragment,Me),Me.forEach(u),xe.forEach(u),oe.forEach(u),ae.forEach(u),this.h()},h(){f(t,"class","self-center dark:text-white"),f(t,"type","button"),f(e,"class","absolute top-0 right-0 p-5"),f($,"class","w-full text-3xl font-semibold bg-transparent outline-none svelte-1vx7r9s"),f($,"type","text"),f($,"placeholder",p=n[4].t("Title")),$.required=!0,f(_,"class","w-full"),f(c,"class","flex-shrink-0 w-full flex justify-between items-center"),f(E,"class","flex-1 w-full h-full"),f(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),f(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),f(V,"class",""),f(H,"class","flex-shrink-0"),f(j,"class","flex flex-row items-center justify-end text-sm font-medium flex-shrink-0 mt-1 p-4 gap-1.5"),f(o,"class","flex flex-col w-full h-full"),f(s,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(B,Y){N(B,e,Y),v(e,t),U(l,t,null),N(B,r,Y),N(B,s,Y),v(s,o),v(o,a),v(a,i),v(i,c),v(c,_),v(_,$),ye($,n[1]),v(i,m),v(i,E),U(k,E,null),v(o,z),v(o,j),v(j,V),T[I].m(V,null),v(j,S),v(j,H),U(d,H,null),g=!0,M||(X=[re(t,"click",n[7]),re($,"input",n[8]),re(o,"submit",xt(n[14]))],M=!0)},p(B,Y){(!g||Y&16&&p!==(p=B[4].t("Title")))&&f($,"placeholder",p),Y&2&&$.value!==B[1]&&ye($,B[1]);const se={};Y&16&&(se.placeholder=B[4].t("Write something...")),!D&&Y&4&&(D=!0,se.value=B[2],de(()=>D=!1)),k.$set(se);let ae=I;I=Q(B),I===ae?T[I].p(B,Y):(ge(),F(T[ae],1,1,()=>{T[ae]=null}),ve(),C=T[I],C?C.p(B,Y):(C=T[I]=ne[I](B),C.c()),x(C,1),C.m(V,null));const oe={};Y&16&&(oe.content=B[4].t("Save")),Y&65552&&(oe.$$scope={dirty:Y,ctx:B}),d.$set(oe)},i(B){g||(x(l.$$.fragment,B),x(k.$$.fragment,B),x(C),x(d.$$.fragment,B),g=!0)},o(B){F(l.$$.fragment,B),F(k.$$.fragment,B),F(C),F(d.$$.fragment,B),g=!1},d(B){B&&(u(e),u(r),u(s)),L(l),L(k),T[I].d(),L(d),M=!1,Ne(X)}}}function Al(n){let e,t,l;function r(o){n[15](o)}let s={size:"full",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Wl]},$$scope:{ctx:n}};return n[0]!==void 0&&(s.show=n[0]),e=new rl({props:s}),ue.push(()=>pe(e,"show",r)),{c(){W(e.$$.fragment)},l(o){A(e.$$.fragment,o)},m(o,a){U(e,o,a),l=!0},p(o,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],de(()=>t=!1)),e.$set(i)},i(o){l||(x(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Ul(n,e,t){let l;const r=Ae("i18n");Te(n,r,V=>t(4,l=V));const s=We();let{show:o=!1}=e,a="Untitled",i="",c=!1;const _=()=>{t(0,o=!1)};function $(){a=this.value,t(1,a)}function p(V){i=V,t(2,i)}function m(V){c=V,t(3,c)}const E=()=>{t(3,c=!1)},k=V=>{const{text:I,filename:C}=V.detail;t(2,i=`${i}${I} `),t(3,c=!1)},D=async()=>{try{let V=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(I){return G.error(l.t("Permission denied when accessing microphone: {{error}}",{error:I})),null});V&&(t(3,c=!0),V.getTracks().forEach(C=>C.stop())),V=null}catch{G.error(l.t("Permission denied when accessing microphone"))}},z=()=>{if(a.trim()===""||i.trim()===""){G.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}s("submit",{name:a,content:i}),t(0,o=!1),t(1,a=""),t(2,i="")};function j(V){o=V,t(0,o)}return n.$$set=V=>{"show"in V&&t(0,o=V.show)},[o,a,i,c,l,r,s,_,$,p,m,E,k,D,z,j]}class Ll extends Ee{constructor(e){super(),Ie(this,e,Ul,Al,$e,{show:0})}}function Xe(n){let e,t,l,r,s,o,a;return s=new Tt({props:{$$slots:{default:[jl]},$$scope:{ctx:n}}}),{c(){e=w("div"),t=w("div"),l=w("div"),r=w("div"),W(s.$$.fragment),this.h()},l(i){e=b(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var c=y(e);t=b(c,"DIV",{class:!0});var _=y(t);l=b(_,"DIV",{class:!0});var $=y(l);r=b($,"DIV",{class:!0});var p=y(r);A(s.$$.fragment,p),p.forEach(u),$.forEach(u),_.forEach(u),c.forEach(u),this.h()},h(){f(r,"class","max-w-md"),f(l,"class","m-auto pt-64 flex flex-col justify-center"),f(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),f(e,"class",o="fixed "+(n[16]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),f(e,"id","dropzone"),f(e,"role","region"),f(e,"aria-label","Drag and Drop Container")},m(i,c){N(i,e,c),v(e,t),v(t,l),v(l,r),U(s,r,null),a=!0},p(i,c){const _={};c[2]&64&&(_.$$scope={dirty:c,ctx:i}),s.$set(_),(!a||c[0]&65536&&o!==(o="fixed "+(i[16]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&f(e,"class",o)},i(i){a||(x(s.$$.fragment,i),a=!0)},o(i){F(s.$$.fragment,i),a=!1},d(i){i&&u(e),L(s)}}}function jl(n){let e,t="Drop any files here to add to my documents";return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){f(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){N(l,e,r)},p:te,d(l){l&&u(e)}}}function Ol(n){let e,t;return e=new Jt({}),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p:te,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Kl(n){let e,t,l,r,s,o,a,i,c,_,$,p,m,E,k,D,z=n[15].t("Access")+"",j,V,I,C,S,H,d,g,M,X;function J(T){n[33](T)}function le(T){n[34](T)}let ne={onChange:n[32]};return n[10]!==void 0&&(ne.show=n[10]),n[0].access_control!==void 0&&(ne.accessControl=n[0].access_control),e=new il({props:ne}),ue.push(()=>pe(e,"show",J)),ue.push(()=>pe(e,"accessControl",le)),E=new cl({props:{strokeWidth:"2.5",className:"size-3.5"}}),d=new Nt({props:{direction:"horizontal",$$slots:{default:[tr]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment),r=q(),s=w("div"),o=w("div"),a=w("div"),i=w("div"),c=w("div"),_=w("input"),$=q(),p=w("div"),m=w("button"),W(E.$$.fragment),k=q(),D=w("div"),j=ie(z),V=q(),I=w("div"),C=w("input"),S=q(),H=w("div"),W(d.$$.fragment),this.h()},l(T){A(e.$$.fragment,T),r=R(T),s=b(T,"DIV",{class:!0});var Q=y(s);o=b(Q,"DIV",{class:!0});var B=y(o);a=b(B,"DIV",{class:!0});var Y=y(a);i=b(Y,"DIV",{class:!0});var se=y(i);c=b(se,"DIV",{class:!0});var ae=y(c);_=b(ae,"INPUT",{type:!0,class:!0,placeholder:!0}),ae.forEach(u),$=R(se),p=b(se,"DIV",{class:!0});var oe=y(p);m=b(oe,"BUTTON",{class:!0,type:!0});var me=y(m);A(E.$$.fragment,me),k=R(me),D=b(me,"DIV",{class:!0});var he=y(D);j=ce(he,z),he.forEach(u),me.forEach(u),oe.forEach(u),se.forEach(u),V=R(Y),I=b(Y,"DIV",{class:!0});var be=y(I);C=b(be,"INPUT",{type:!0,class:!0,placeholder:!0}),be.forEach(u),Y.forEach(u),B.forEach(u),Q.forEach(u),S=R(T),H=b(T,"DIV",{class:!0});var De=y(H);A(d.$$.fragment,De),De.forEach(u),this.h()},h(){f(_,"type","text"),f(_,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-none"),f(_,"placeholder","Knowledge Name"),f(c,"class","w-full"),f(D,"class","text-sm font-medium flex-shrink-0"),f(m,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),f(m,"type","button"),f(p,"class","self-center flex-shrink-0"),f(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),f(C,"type","text"),f(C,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-none"),f(C,"placeholder","Knowledge Description"),f(I,"class","flex w-full px-1"),f(a,"class","flex-1"),f(o,"class","flex w-full"),f(s,"class","w-full mb-2.5"),f(H,"class","flex flex-row flex-1 h-full max-h-full pb-2.5")},m(T,Q){U(e,T,Q),N(T,r,Q),N(T,s,Q),v(s,o),v(o,a),v(a,i),v(i,c),v(c,_),ye(_,n[0].name),v(i,$),v(i,p),v(p,m),U(E,m,null),v(m,k),v(m,D),v(D,j),v(a,V),v(a,I),v(I,C),ye(C,n[0].description),N(T,S,Q),N(T,H,Q),U(d,H,null),g=!0,M||(X=[re(_,"input",n[35]),re(_,"input",n[36]),re(m,"click",n[37]),re(C,"input",n[38]),re(C,"input",n[39])],M=!0)},p(T,Q){const B={};!t&&Q[0]&1024&&(t=!0,B.show=T[10],de(()=>t=!1)),!l&&Q[0]&1&&(l=!0,B.accessControl=T[0].access_control,de(()=>l=!1)),e.$set(B),Q[0]&1&&_.value!==T[0].name&&ye(_,T[0].name),(!g||Q[0]&32768)&&z!==(z=T[15].t("Access")+"")&&fe(j,z),Q[0]&1&&C.value!==T[0].description&&ye(C,T[0].description);const Y={};Q[0]&45950|Q[2]&64&&(Y.$$scope={dirty:Q,ctx:T}),d.$set(Y)},i(T){g||(x(e.$$.fragment,T),x(E.$$.fragment,T),x(d.$$.fragment,T),g=!0)},o(T){F(e.$$.fragment,T),F(E.$$.fragment,T),F(d.$$.fragment,T),g=!1},d(T){T&&(u(r),u(s),u(S),u(H)),L(e,T),L(E),L(d),M=!1,Ne(X)}}}function Hl(n){let e,t,l=n[15].t("No content found")+"",r,s,o,a=n[15].t("Drag and drop a file to upload or select a file to view")+"",i;return{c(){e=w("div"),t=w("div"),r=ie(l),s=q(),o=w("div"),i=ie(a),this.h()},l(c){e=b(c,"DIV",{class:!0});var _=y(e);t=b(_,"DIV",{});var $=y(t);r=ce($,l),$.forEach(u),s=R(_),o=b(_,"DIV",{class:!0});var p=y(o);i=ce(p,a),p.forEach(u),_.forEach(u),this.h()},h(){f(o,"class","mx-12 mt-2 text-center text-gray-200 dark:text-gray-700"),f(e,"class","m-auto flex flex-col justify-center text-center text-gray-500 text-xs")},m(c,_){N(c,e,_),v(e,t),v(t,r),v(e,s),v(e,o),v(o,i)},p(c,_){_[0]&32768&&l!==(l=c[15].t("No content found")+"")&&fe(r,l),_[0]&32768&&a!==(a=c[15].t("Drag and drop a file to upload or select a file to view")+"")&&fe(i,a)},i:te,o:te,d(c){c&&u(e)}}}function ql(n){let e,t,l;return t=new hl({props:{files:n[12],selectedFileId:n[2]}}),t.$on("click",n[44]),t.$on("delete",n[45]),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=y(e);A(t.$$.fragment,s),s.forEach(u),this.h()},h(){f(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,s){N(r,e,s),U(t,e,null),l=!0},p(r,s){const o={};s[0]&4096&&(o.files=r[12]),s[0]&4&&(o.selectedFileId=r[2]),t.$set(o)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),L(t)}}}function Rl(n){let e,t,l,r,s,o,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',i,c,_,$,p,m,E,k,D,z,j,V,I;m=new Sl({}),m.$on("upload",n[42]),m.$on("sync",n[43]);const C=[ql,Hl],S=[];function H(d,g){return d[12].length>0?0:1}return k=H(n),D=S[k]=C[k](n),{c(){e=w("div"),t=w("div"),l=w("div"),r=w("div"),s=w("div"),o=w("div"),o.innerHTML=a,i=q(),c=w("input"),$=q(),p=w("div"),W(m.$$.fragment),E=q(),D.c(),this.h()},l(d){e=b(d,"DIV",{class:!0});var g=y(e);t=b(g,"DIV",{class:!0});var M=y(t);l=b(M,"DIV",{class:!0});var X=y(l);r=b(X,"DIV",{class:!0});var J=y(r);s=b(J,"DIV",{class:!0});var le=y(s);o=b(le,"DIV",{class:!0,"data-svelte-h":!0}),Ue(o)!=="svelte-1p16zsx"&&(o.innerHTML=a),i=R(le),c=b(le,"INPUT",{class:!0,placeholder:!0}),$=R(le),p=b(le,"DIV",{});var ne=y(p);A(m.$$.fragment,ne),ne.forEach(u),le.forEach(u),J.forEach(u),E=R(X),D.l(X),X.forEach(u),M.forEach(u),g.forEach(u),this.h()},h(){f(o,"class","self-center ml-1 mr-3"),f(c,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),f(c,"placeholder",_=n[15].t("Search Collection")),f(s,"class","flex py-1"),f(r,"class","px-3"),f(l,"class","w-full h-full flex flex-col"),f(t,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),f(e,"class",z=(n[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850")},m(d,g){N(d,e,g),v(e,t),v(t,l),v(l,r),v(r,s),v(s,o),v(s,i),v(s,c),ye(c,n[1]),v(s,$),v(s,p),U(m,p,null),v(l,E),S[k].m(l,null),j=!0,V||(I=[re(c,"input",n[40]),re(c,"focus",n[41])],V=!0)},p(d,g){(!j||g[0]&32768&&_!==(_=d[15].t("Search Collection")))&&f(c,"placeholder",_),g[0]&2&&c.value!==d[1]&&ye(c,d[1]);let M=k;k=H(d),k===M?S[k].p(d,g):(ge(),F(S[M],1,1,()=>{S[M]=null}),ve(),D=S[k],D?D.p(d,g):(D=S[k]=C[k](d),D.c()),x(D,1),D.m(l,null)),(!j||g[0]&8&&z!==(z=(d[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&f(e,"class",z)},i(d){j||(x(m.$$.fragment,d),x(D),j=!0)},o(d){F(m.$$.fragment,d),F(D),j=!1},d(d){d&&u(e),L(m),S[k].d(),V=!1,Ne(I)}}}function Xl(n){let e,t;return e=new St({props:{className:"h-full",show:n[2]!==null,$$slots:{default:[Gl]},$$scope:{ctx:n}}}),e.$on("close",n[55]),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p(l,r){const s={};r[0]&4&&(s.show=l[2]!==null),r[0]&40964|r[2]&64&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}function Yl(n){let e,t,l,r;return e=new zt({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[Jl]},$$scope:{ctx:n}}}),l=new Qe({props:{$$slots:{default:[er]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment),t=q(),W(l.$$.fragment)},l(s){A(e.$$.fragment,s),t=R(s),A(l.$$.fragment,s)},m(s,o){U(e,s,o),N(s,t,o),U(l,s,o),r=!0},p(s,o){const a={};o[2]&64&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const i={};o[0]&41008|o[2]&64&&(i.$$scope={dirty:o,ctx:s}),l.$set(i)},i(s){r||(x(e.$$.fragment,s),x(l.$$.fragment,s),r=!0)},o(s){F(e.$$.fragment,s),F(l.$$.fragment,s),r=!1},d(s){s&&u(t),L(e,s),L(l,s)}}}function Ye(n){let e,t,l;function r(o){n[54](o)}let s={className:"input-prose-sm",placeholder:n[15].t("Add content here")};return n[13].data.content!==void 0&&(s.value=n[13].data.content),e=new Le({props:s}),ue.push(()=>pe(e,"value",r)),{c(){W(e.$$.fragment)},l(o){A(e.$$.fragment,o)},m(o,a){U(e,o,a),l=!0},p(o,a){const i={};a[0]&32768&&(i.placeholder=o[15].t("Add content here")),!t&&a[0]&8192&&(t=!0,i.value=o[13].data.content,de(()=>t=!1)),e.$set(i)},i(o){l||(x(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function Gl(n){var H,d;let e,t,l,r,s,o,a,i,c=((d=(H=n[13])==null?void 0:H.meta)==null?void 0:d.name)+"",_,$,p,m,E=n[15].t("Save")+"",k,D,z,j=n[13].id,V,I,C;o=new Ze({props:{strokeWidth:"2.5"}});let S=Ye(n);return{c(){e=w("div"),t=w("div"),l=w("div"),r=w("div"),s=w("button"),W(o.$$.fragment),a=q(),i=w("div"),_=ie(c),$=q(),p=w("div"),m=w("button"),k=ie(E),D=q(),z=w("div"),S.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var M=y(e);t=b(M,"DIV",{class:!0});var X=y(t);l=b(X,"DIV",{class:!0});var J=y(l);r=b(J,"DIV",{class:!0});var le=y(r);s=b(le,"BUTTON",{class:!0});var ne=y(s);A(o.$$.fragment,ne),ne.forEach(u),le.forEach(u),a=R(J),i=b(J,"DIV",{class:!0});var T=y(i);_=ce(T,c),T.forEach(u),$=R(J),p=b(J,"DIV",{});var Q=y(p);m=b(Q,"BUTTON",{class:!0});var B=y(m);k=ce(B,E),B.forEach(u),Q.forEach(u),J.forEach(u),D=R(X),z=b(X,"DIV",{class:!0});var Y=y(z);S.l(Y),Y.forEach(u),X.forEach(u),M.forEach(u),this.h()},h(){f(s,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),f(r,"class","mr-2"),f(i,"class","flex-1 text-xl line-clamp-1"),f(m,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),f(l,"class","flex-shrink-0 mt-1 mb-2 flex items-center"),f(z,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),f(t,"class","flex flex-col w-full h-full max-h-full"),f(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,M){N(g,e,M),v(e,t),v(t,l),v(l,r),v(r,s),U(o,s,null),v(l,a),v(l,i),v(i,_),v(l,$),v(l,p),v(p,m),v(m,k),v(t,D),v(t,z),S.m(z,null),V=!0,I||(C=[re(s,"click",n[52]),re(m,"click",n[53])],I=!0)},p(g,M){var X,J;(!V||M[0]&8192)&&c!==(c=((J=(X=g[13])==null?void 0:X.meta)==null?void 0:J.name)+"")&&fe(_,c),(!V||M[0]&32768)&&E!==(E=g[15].t("Save")+"")&&fe(k,E),M[0]&8192&&$e(j,j=g[13].id)?(ge(),F(S,1,1,te),ve(),S=Ye(g),S.c(),x(S,1),S.m(z,null)):S.p(g,M)},i(g){V||(x(o.$$.fragment,g),x(S),V=!0)},o(g){F(o.$$.fragment,g),F(S),V=!1},d(g){g&&u(e),L(o),S.d(g),I=!1,Ne(C)}}}function Jl(n){let e,t,l;return t=new Lt({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=y(e);A(t.$$.fragment,s),s.forEach(u),this.h()},h(){f(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(r,s){N(r,e,s),U(t,e,null),l=!0},p:te,i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),L(t)}}}function Ql(n){let e;return{c(){e=w("div")},l(t){e=b(t,"DIV",{}),y(e).forEach(u)},m(t,l){N(t,e,l)},p:te,i:te,o:te,d(t){t&&u(e)}}}function Zl(n){var S,H;let e,t,l,r,s,o=((H=(S=n[13])==null?void 0:S.meta)==null?void 0:H.name)+"",a,i,c,_,$,p=n[15].t("Save")+"",m,E,k,D=n[13].id,z,j,V,I=!n[5]&&Ge(n),C=Je(n);return{c(){e=w("div"),t=w("div"),I&&I.c(),l=q(),r=w("div"),s=w("a"),a=ie(o),c=q(),_=w("div"),$=w("button"),m=ie(p),E=q(),k=w("div"),C.c(),this.h()},l(d){e=b(d,"DIV",{class:!0});var g=y(e);t=b(g,"DIV",{class:!0});var M=y(t);I&&I.l(M),l=R(M),r=b(M,"DIV",{class:!0});var X=y(r);s=b(X,"A",{class:!0,href:!0,target:!0});var J=y(s);a=ce(J,o),J.forEach(u),X.forEach(u),c=R(M),_=b(M,"DIV",{});var le=y(_);$=b(le,"BUTTON",{class:!0});var ne=y($);m=ce(ne,p),ne.forEach(u),le.forEach(u),M.forEach(u),E=R(g),k=b(g,"DIV",{class:!0});var T=y(k);C.l(T),T.forEach(u),g.forEach(u),this.h()},h(){f(s,"class","hover:text-gray-500 hover:dark:text-gray-100 hover:underline flex-grow line-clamp-1"),f(s,"href",i=n[13].id?`/api/v1/files/${n[13].id}/content`:"#"),f(s,"target","_blank"),f(r,"class","flex-1 text-2xl font-medium"),f($,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),f(t,"class","flex-shrink-0 mb-2 flex items-center"),f(k,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-none overflow-y-auto scrollbar-hidden"),f(e,"class","flex flex-col w-full h-full max-h-full ml-2.5")},m(d,g){N(d,e,g),v(e,t),I&&I.m(t,null),v(t,l),v(t,r),v(r,s),v(s,a),v(t,c),v(t,_),v(_,$),v($,m),v(e,E),v(e,k),C.m(k,null),z=!0,j||(V=re($,"click",n[50]),j=!0)},p(d,g){var M,X;d[5]?I&&(ge(),F(I,1,1,()=>{I=null}),ve()):I?(I.p(d,g),g[0]&32&&x(I,1)):(I=Ge(d),I.c(),x(I,1),I.m(t,l)),(!z||g[0]&8192)&&o!==(o=((X=(M=d[13])==null?void 0:M.meta)==null?void 0:X.name)+"")&&fe(a,o),(!z||g[0]&8192&&i!==(i=d[13].id?`/api/v1/files/${d[13].id}/content`:"#"))&&f(s,"href",i),(!z||g[0]&32768)&&p!==(p=d[15].t("Save")+"")&&fe(m,p),g[0]&8192&&$e(D,D=d[13].id)?(ge(),F(C,1,1,te),ve(),C=Je(d),C.c(),x(C,1),C.m(k,null)):C.p(d,g)},i(d){z||(x(I),x(C),z=!0)},o(d){F(I),F(C),z=!1},d(d){d&&u(e),I&&I.d(),C.d(d),j=!1,V()}}}function Ge(n){let e,t,l,r,s,o;return l=new Ze({props:{strokeWidth:"2.5"}}),{c(){e=w("div"),t=w("button"),W(l.$$.fragment),this.h()},l(a){e=b(a,"DIV",{class:!0});var i=y(e);t=b(i,"BUTTON",{class:!0});var c=y(t);A(l.$$.fragment,c),c.forEach(u),i.forEach(u),this.h()},h(){f(t,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),f(e,"class","-translate-x-2")},m(a,i){N(a,e,i),v(e,t),U(l,t,null),r=!0,s||(o=re(t,"click",n[49]),s=!0)},p:te,i(a){r||(x(l.$$.fragment,a),r=!0)},o(a){F(l.$$.fragment,a),r=!1},d(a){a&&u(e),L(l),s=!1,o()}}}function Je(n){let e,t,l;function r(o){n[51](o)}let s={className:"input-prose-sm",placeholder:n[15].t("Add content here")};return n[13].data.content!==void 0&&(s.value=n[13].data.content),e=new Le({props:s}),ue.push(()=>pe(e,"value",r)),{c(){W(e.$$.fragment)},l(o){A(e.$$.fragment,o)},m(o,a){U(e,o,a),l=!0},p(o,a){const i={};a[0]&32768&&(i.placeholder=o[15].t("Add content here")),!t&&a[0]&8192&&(t=!0,i.value=o[13].data.content,de(()=>t=!1)),e.$set(i)},i(o){l||(x(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){L(e,o)}}}function er(n){let e,t,l,r;const s=[Zl,Ql],o=[];function a(i,c){return i[13]?0:1}return t=a(n),l=o[t]=s[t](n),{c(){e=w("div"),l.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var c=y(e);l.l(c),c.forEach(u),this.h()},h(){f(e,"class","flex-1 flex justify-start h-full max-h-full")},m(i,c){N(i,e,c),o[t].m(e,null),r=!0},p(i,c){let _=t;t=a(i),t===_?o[t].p(i,c):(ge(),F(o[_],1,1,()=>{o[_]=null}),ve(),l=o[t],l?l.p(i,c):(l=o[t]=s[t](i),l.c()),x(l,1),l.m(e,null))},i(i){r||(x(l),r=!0)},o(i){F(l),r=!1},d(i){i&&u(e),o[t].d()}}}function tr(n){let e,t,l,r,s,o,a;function i(m){n[48](m)}let c={defaultSize:n[6],collapsible:!0,maxSize:50,minSize:n[6],class:"h-full",onExpand:n[46],onCollapse:n[47],$$slots:{default:[Rl]},$$scope:{ctx:n}};n[4]!==void 0&&(c.pane=n[4]),e=new Qe({props:c}),ue.push(()=>pe(e,"pane",i));const _=[Yl,Xl],$=[];function p(m,E){return m[3]?0:!m[3]&&m[2]!==null?1:-1}return~(r=p(n))&&(s=$[r]=_[r](n)),{c(){W(e.$$.fragment),l=q(),s&&s.c(),o=Oe()},l(m){A(e.$$.fragment,m),l=R(m),s&&s.l(m),o=Oe()},m(m,E){U(e,m,E),N(m,l,E),~r&&$[r].m(m,E),N(m,o,E),a=!0},p(m,E){const k={};E[0]&64&&(k.defaultSize=m[6]),E[0]&64&&(k.minSize=m[6]),E[0]&32&&(k.onExpand=m[46]),E[0]&32&&(k.onCollapse=m[47]),E[0]&37646|E[2]&64&&(k.$$scope={dirty:E,ctx:m}),!t&&E[0]&16&&(t=!0,k.pane=m[4],de(()=>t=!1)),e.$set(k);let D=r;r=p(m),r===D?~r&&$[r].p(m,E):(s&&(ge(),F($[D],1,1,()=>{$[D]=null}),ve()),~r?(s=$[r],s?s.p(m,E):(s=$[r]=_[r](m),s.c()),x(s,1),s.m(o.parentNode,o)):s=null)},i(m){a||(x(e.$$.fragment,m),x(s),a=!0)},o(m){F(e.$$.fragment,m),F(s),a=!1},d(m){m&&(u(l),u(o)),L(e,m),~r&&$[r].d(m)}}}function lr(n){let e,t,l,r,s,o,a,i,c,_,$,p,m,E,k,D=n[14]&&Xe(n);function z(d){n[26](d)}let j={message:n[15].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};n[9]!==void 0&&(j.show=n[9]),t=new al({props:j}),ue.push(()=>pe(t,"show",z)),t.$on("confirm",n[27]);function V(d){n[28](d)}let I={};n[8]!==void 0&&(I.show=n[8]),s=new Ll({props:I}),ue.push(()=>pe(s,"show",V)),s.$on("submit",n[29]);const C=[Kl,Ol],S=[];function H(d,g){return d[7]&&d[0]?0:1}return $=H(n),p=S[$]=C[$](n),{c(){D&&D.c(),e=q(),W(t.$$.fragment),r=q(),W(s.$$.fragment),a=q(),i=w("input"),c=q(),_=w("div"),p.c(),this.h()},l(d){D&&D.l(d),e=R(d),A(t.$$.fragment,d),r=R(d),A(s.$$.fragment,d),a=R(d),i=b(d,"INPUT",{id:!0,type:!0}),c=R(d),_=b(d,"DIV",{class:!0,id:!0});var g=y(_);p.l(g),g.forEach(u),this.h()},h(){f(i,"id","files-input"),f(i,"type","file"),i.multiple=!0,i.hidden=!0,f(_,"class","flex flex-col w-full h-full max-h-[100dvh] translate-y-1"),f(_,"id","collection-container")},m(d,g){D&&D.m(d,g),N(d,e,g),U(t,d,g),N(d,r,g),U(s,d,g),N(d,a,g),N(d,i,g),N(d,c,g),N(d,_,g),S[$].m(_,null),m=!0,E||(k=[re(i,"change",n[30]),re(i,"change",n[31])],E=!0)},p(d,g){d[14]?D?(D.p(d,g),g[0]&16384&&x(D,1)):(D=Xe(d),D.c(),x(D,1),D.m(e.parentNode,e)):D&&(ge(),F(D,1,1,()=>{D=null}),ve());const M={};g[0]&32768&&(M.message=d[15].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&512&&(l=!0,M.show=d[9],de(()=>l=!1)),t.$set(M);const X={};!o&&g[0]&256&&(o=!0,X.show=d[8],de(()=>o=!1)),s.$set(X);let J=$;$=H(d),$===J?S[$].p(d,g):(ge(),F(S[J],1,1,()=>{S[J]=null}),ve(),p=S[$],p?p.p(d,g):(p=S[$]=C[$](d),p.c()),x(p,1),p.m(_,null))},i(d){m||(x(D),x(t.$$.fragment,d),x(s.$$.fragment,d),x(p),m=!0)},o(d){F(D),F(t.$$.fragment,d),F(s.$$.fragment,d),F(p),m=!1},d(d){d&&(u(e),u(r),u(a),u(i),u(c),u(_)),D&&D.d(d),L(t,d),L(s,d),S[$].d(),E=!1,Ne(k)}}}function rr(n,e,t){let l,r,s;Te(n,Bt,h=>t(58,l=h)),Te(n,Pt,h=>t(16,s=h));const o=Ae("i18n");Te(n,o,h=>t(15,r=h));let a=!0,i,c=!0,_=0,$=null,p=null,m="",E=!1,k=!1,D=!1,z=null,j=[],V=null,I=null,C=null,S=null,H,d=!1;const g=(h,O)=>{const K=new Blob([O],{type:"text/plain"}),P=Ke(K,`${h}.txt`);return console.log(P),P},M=async h=>{console.log(h);const O=Gt(),K={type:"file",file:"",id:null,url:"",name:h.name,size:h.size,status:"uploading",error:"",itemId:O};if(K.size==0)return G.error(r.t("You cannot upload an empty file.")),null;if(t(0,p.files=[...p.files??[],K],p),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(h.type)){const P=await Yt(localStorage.token,h).catch(Z=>(G.error(Z),null));if(P){console.log(P);const Z=new Blob([P.text],{type:"text/plain"});h=Ke(Z,`${h.name}.txt`)}}try{const P=await At(localStorage.token,h).catch(Z=>(G.error(Z),null));P?(console.log(P),t(0,p.files=p.files.map(Z=>(Z.itemId===O&&(Z.id=P.id),delete Z.itemId,Z)),p),await B(P.id)):G.error(r.t("Failed to upload file."))}catch(P){G.error(P)}},X=async()=>{const h="showDirectoryPicker"in window;try{h?await le():await ne()}catch(O){T(O)}},J=h=>h.split("/").some(O=>O.startsWith(".")),le=async()=>{const h=await window.showDirectoryPicker();let O=0,K=0;const P=()=>{const we=K/O*100;G.info(`Upload Progress: ${K}/${O} (${we.toFixed(2)}%)`)};async function Z(we){for await(const ee of we.values())ee.name.startsWith(".")||(ee.kind==="file"?O++:ee.kind==="directory"&&(ee.name.startsWith(".")||await Z(ee)))}async function ke(we,ee=""){for await(const _e of we.values()){if(_e.name.startsWith("."))continue;const Ce=ee?`${ee}/${_e.name}`:_e.name;if(!J(Ce))if(_e.kind==="file"){const je=await _e.getFile(),It=new File([je],Ce,{type:je.type});await M(It),K++,P()}else _e.kind==="directory"&&(_e.name.startsWith(".")||await ke(_e,Ce))}}await Z(h),P(),O>0?await ke(h):console.log("No files to upload.")},ne=async()=>new Promise((h,O)=>{const K=document.createElement("input");K.type="file",K.webkitdirectory=!0,K.directory=!0,K.multiple=!0,K.style.display="none",document.body.appendChild(K),K.onchange=async()=>{try{const P=Array.from(K.files).filter(ee=>!J(ee.webkitRelativePath));let Z=P.length,ke=0;const we=()=>{const ee=ke/Z*100;G.info(`Upload Progress: ${ke}/${Z} (${ee.toFixed(2)}%)`)};we();for(const ee of P)if(!ee.name.startsWith(".")){const _e=ee.webkitRelativePath||ee.name,Ce=new File([ee],_e,{type:ee.type});await M(Ce),ke++,we()}document.body.removeChild(K),h()}catch(P){O(P)}},K.onerror=P=>{document.body.removeChild(K),O(P)},K.click()}),T=h=>{h.name==="AbortError"?G.info("Directory selection was cancelled"):(G.error("Error accessing directory"),console.error("Directory access error:",h))},Q=async()=>{if(((p==null?void 0:p.files)??[]).length>0){const h=await Ot(localStorage.token,$).catch(O=>{G.error(O)});h&&(t(0,p=h),G.success(r.t("Knowledge reset successfully.")),X())}else X()},B=async h=>{const O=await Kt(localStorage.token,$,h).catch(K=>(G.error(K),null));O?(t(0,p=O),G.success(r.t("File added successfully."))):(G.error(r.t("Failed to add file.")),t(0,p.files=p.files.filter(K=>K.id!==h),p))},Y=async h=>{const O=await Ht(localStorage.token,$,h).catch(K=>{G.error(K)});O&&(t(0,p=O),G.success(r.t("File removed successfully.")))},se=async()=>{const h=V.id,O=V.data.content,K=Ut(localStorage.token,h,O).catch(Z=>{G.error(Z)}),P=await qt(localStorage.token,$,h).catch(Z=>{G.error(Z)});K&&P&&(t(0,p=P),G.success(r.t("File content updated successfully.")))},ae=()=>{console.log("debounce"),S&&clearTimeout(S),S=setTimeout(async()=>{if(p.name.trim()===""||p.description.trim()===""){G.error(r.t("Please fill in all fields."));return}await Rt(localStorage.token,$,{...p,name:p.name,description:p.description,access_control:p.access_control}).catch(O=>{G.error(O)})&&(G.success(r.t("Knowledge updated successfully")),Wt.set(await Xt(localStorage.token)))},1e3)},oe=async h=>{h.matches?t(3,a=!0):t(3,a=!1)},me=h=>{h.preventDefault(),t(14,d=!0)},he=()=>{t(14,d=!1)},be=async h=>{var O,K;if(h.preventDefault(),t(14,d=!1),(O=h.dataTransfer)!=null&&O.files){const P=(K=h.dataTransfer)==null?void 0:K.files;if(P&&P.length>0)for(const Z of P)await M(Z);else G.error(r.t("File not found."))}};Vt(async()=>{H=window.matchMedia("(min-width: 1024px)"),H.addEventListener("change",oe),oe(H);const h=document.getElementById("collection-container");t(6,_=a?Math.floor(300/h.clientWidth*100):100),new ResizeObserver(Z=>{for(let ke of Z){const ee=300/ke.contentRect.width*100;t(6,_=a?Math.floor(ee):100),c&&i&&i.isExpanded()&&i.getSize()<_&&i.resize(_)}}).observe(h),i&&i.expand(),t(7,$=l.params.id);const K=await jt(localStorage.token,$).catch(Z=>(G.error(Z),null));K?t(0,p=K):Mt("/workspace/knowledge");const P=document.querySelector("body");P==null||P.addEventListener("dragover",me),P==null||P.addEventListener("drop",be),P==null||P.addEventListener("dragleave",he)}),Ft(()=>{H==null||H.removeEventListener("change",oe);const h=document.querySelector("body");h==null||h.removeEventListener("dragover",me),h==null||h.removeEventListener("drop",be),h==null||h.removeEventListener("dragleave",he)});function De(h){k=h,t(9,k)}const Se=()=>{Q()};function xe(h){E=h,t(8,E)}const ze=h=>{const O=g(h.detail.name,h.detail.content);M(O)};function Me(){z=this.files,t(11,z)}const et=async()=>{if(z&&z.length>0){for(const O of z)await M(O);t(11,z=null);const h=document.getElementById("files-input");h&&(h.value="")}else G.error(r.t("File not found."))},tt=()=>{ae()};function lt(h){D=h,t(10,D)}function rt(h){n.$$.not_equal(p.access_control,h)&&(p.access_control=h,t(0,p))}function nt(){p.name=this.value,t(0,p)}const st=()=>{ae()},ot=()=>{t(10,D=!0)};function at(){p.description=this.value,t(0,p)}const it=()=>{ae()};function ct(){m=this.value,t(1,m)}const ft=()=>{t(2,I=null)},ut=h=>{h.detail.type==="directory"?X():h.detail.type==="text"?t(8,E=!0):document.getElementById("files-input").click()},dt=h=>{t(9,k=!0)},pt=h=>{t(2,I=I===h.detail?null:h.detail)},mt=h=>{console.log(h.detail),t(2,I=null),Y(h.detail)},ht=()=>{t(5,c=!0)},_t=()=>{t(5,c=!1)};function gt(h){i=h,t(4,i)}const vt=()=>{i.expand()},$t=()=>{se()};function wt(h){n.$$.not_equal(V.data.content,h)&&(V.data.content=h,t(13,V),t(2,I),t(0,p))}const bt=()=>{t(2,I=null)},kt=()=>{se()};function yt(h){n.$$.not_equal(V.data.content,h)&&(V.data.content=h,t(13,V),t(2,I),t(0,p))}const Et=()=>{t(2,I=null)};return n.$$.update=()=>{if(n.$$.dirty[0]&1&&p&&p.files&&t(25,C=new Ct(p.files,{keys:["meta.name","meta.description"]})),n.$$.dirty[0]&33554435&&C&&t(12,j=m?C.search(m).map(h=>h.item):(p==null?void 0:p.files)??[]),n.$$.dirty[0]&5)if(I){const h=((p==null?void 0:p.files)??[]).find(O=>O.id===I);h?(h.data=h.data??{content:""},t(13,V=h)):t(13,V=null)}else t(13,V=null)},[p,m,I,a,i,c,_,$,E,k,D,z,j,V,d,r,s,o,g,M,X,Q,Y,se,ae,C,De,Se,xe,ze,Me,et,tt,lt,rt,nt,st,ot,at,it,ct,ft,ut,dt,pt,mt,ht,_t,gt,vt,$t,wt,bt,kt,yt,Et]}class nr extends Ee{constructor(e){super(),Ie(this,e,rr,lr,$e,{},null,[-1,-1,-1])}}function sr(n){let e,t;return e=new nr({}),{c(){W(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,r){U(e,l,r),t=!0},p:te,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){L(e,l)}}}class Mr extends Ee{constructor(e){super(),Ie(this,e,null,sr,$e,{})}}export{Mr as component};
//# sourceMappingURL=21.CqBhYL3k.js.map
