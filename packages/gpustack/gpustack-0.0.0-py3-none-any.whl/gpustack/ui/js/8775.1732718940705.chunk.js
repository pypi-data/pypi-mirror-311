"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8775],{68940:function(e,n,t){t.d(n,{Z:function(){return a}});var l=t(9532);function a(){return l.Z.CancelToken.source}},76483:function(e,n,t){var l=t(82092),a=t.n(l),r=t(26068),s=t.n(r),i=t(48305),o=t.n(i),u=t(75489),c=t(92233),d=t(42779),f=t(13770),m=t(4423),x=t(99178),p=t(68476),h=t(23333),v=t(40474),g=t(96247),b=t(32699),j=t.n(b),y=t(50959),C=t(26938),w=t(11527),Z=(0,y.forwardRef)((function(e,n){var t=e.setParams,l=e.onValuesChange,r=e.onModelChange,i=e.parametersTitle,b=e.selectedModel,Z=e.globalParams,k=e.initialValues,I=e.paramsConfig,N=e.modelList,R=e.params,M=e.showModelSelector,F=void 0===M||M,z=e.extra,V=(0,x.useIntl)(),L=p.Z.useForm(),P=o()(L,1)[0],T=(0,y.useId)();(0,y.useImperativeHandle)(n,(function(){return{form:P}})),(0,y.useEffect)((function(){F?(P.setFieldsValue(s()({model:b||j().get(N,"[0].value")},k)),t(s()({model:b||j().get(N,"[0].value")},k))):(P.setFieldsValue(s()({model:b||""},k)),t(s()({model:b||""},k)))}),[N,F,b,k]);var S=(0,y.useCallback)((function(e){null==r||r(e)}),[r]),A=(0,y.useCallback)((function(e,n){null==t||t(n),null==l||l(e,n)}),[l,t]),B=(0,y.useCallback)((function(e,n){var r=P.getFieldsValue();P.setFieldsValue(s()(s()({},r),{},a()({},n,e))),t(s()(s()({},r),{},a()({},n,e))),null==l||l(a()({},n,e),s()(s()({},r),{},a()({},n,e)))}),[P,t,l]);(0,y.useEffect)((function(){P.setFieldsValue(Z)}),[Z]);var E=(0,y.useCallback)((function(e){return(0,w.jsxs)("span",{className:C.Z.label,style:{width:f.d.mini},children:[(0,w.jsx)("span",{className:"text",children:e.description?(0,w.jsxs)(h.Z,{title:e.description,children:[(0,w.jsxs)("span",{children:[" ",e.label]}),(0,w.jsx)("span",{className:"m-l-5",children:(0,w.jsx)(m.Z,{})})]}):(0,w.jsx)("span",{children:e.label})}),(0,w.jsx)(v.Z,{className:"label-val",variant:"outlined",size:"small",value:P.getFieldValue(e.field),controls:!1,onChange:function(n){return B(n,e.field)}})]})}),[P,B]),H=(0,y.useMemo)((function(){return null!=I&&I.length?I.map((function(e){return"InputNumber"===e.type?(0,w.jsx)(p.Z.Item,{name:e.name,rules:e.rules,children:(0,w.jsx)(c.Z.Number,s()(s()({},e.attrs),{},{style:{width:"100%"},label:e.label.isLocalized?V.formatMessage({id:e.label.text}):e.label.text}))},e.name):"TextArea"===e.type?(0,w.jsx)(p.Z.Item,{name:e.name,rules:e.rules,children:(0,w.jsx)(c.Z.TextArea,s()(s()({},e.attrs),{},{style:{width:"100%"},label:e.label.isLocalized?V.formatMessage({id:e.label.text}):e.label.text}))},e.name):"Select"===e.type?(0,w.jsx)(p.Z.Item,{name:e.name,rules:e.rules,children:(0,w.jsx)(d.Z,s()(s()({},e.attrs),{},{options:e.options,label:e.label.isLocalized?V.formatMessage({id:e.label.text}):e.label.text}))},e.name):"Slider"===e.type?(0,w.jsx)(p.Z.Item,{name:e.name,rules:e.rules,children:(0,w.jsx)(u.Z,{label:E({field:e.name,label:e.label.isLocalized?V.formatMessage({id:e.label.text}):e.label.text,description:null!==(n=e.description)&&void 0!==n&&n.isLocalized?V.formatMessage({id:null===(t=e.description)||void 0===t?void 0:t.text}):(null===(l=e.description)||void 0===l?void 0:l.text)||""}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,w.jsx)(g.Z,s()(s()({},e.attrs),{},{style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:P.getFieldValue(e.name)||void 0,onChange:function(n){return B(n,e.name)}}))})},e.name):null;var n,t,l})):null}),[I,R,V]);return(0,w.jsx)(p.Z,{name:T,form:P,onValuesChange:A,onFinish:function(e){},onFinishFailed:function(e){},children:(0,w.jsxs)("div",{children:[(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h3",{className:"m-b-20 m-l-10 font-size-14 line-24",children:i||(0,w.jsx)("span",{children:V.formatMessage({id:"playground.parameters"})})}),(0,w.jsx)(p.Z.Item,{name:"model",rules:[{required:!0,message:V.formatMessage({id:"common.form.rule.select"},{name:V.formatMessage({id:"playground.model"})})}],children:(0,w.jsx)(d.Z,{onChange:S,showSearch:!0,options:N,label:V.formatMessage({id:"playground.model"})})})]}),H,z]})})}));n.Z=(0,y.memo)(Z)},43337:function(e,n,t){t.d(n,{Z:function(){return F}});var l=t(90228),a=t.n(l),r=t(48305),s=t.n(r),i=t(335),o=t.n(i),u=t(87999),c=t.n(u),d=t(15558),f=t.n(d),m=t(26068),x=t.n(m),p=t(43943),h=t(99178),v=t(8267),g=t(23333),b=t(85885),j=t(82187),y=t.n(j),C=t(50959),w=t(11527),Z=function(e){var n=e.value,t=e.onChange,l=e.style,a=e.label,r=e.placeholder,i=e.height,o=void 0===i?46:i,u=(0,h.useIntl)(),c=C.useRef(null),d=(0,C.useState)({minRows:1,maxRows:1,focus:!1}),f=s()(d,2),m=f[0],j=f[1],Z=function(){j({minRows:3,maxRows:3,focus:!0}),setTimeout((function(){var e,n;null===(e=c.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),50)};return(0,w.jsxs)("div",{className:y()("row-textarea",{focus:m.focus}),style:x()({},l),children:[(0,w.jsxs)("div",{style:{display:m.focus?"block":"none"},className:"textarea-wrapper",children:[a&&(0,w.jsx)("span",{className:"textarea-label",children:a}),(0,w.jsx)(v.Z.TextArea,{className:"custome-scrollbar",ref:c,placeholder:r,style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:m.minRows,maxRows:m.maxRows},onFocus:Z,onBlur:function(e){j({minRows:2,maxRows:2,focus:!1})},allowClear:!1,onChange:function(e){null==t||t(e)},onPaste:function(n){var t;null===(t=e.onPaste)||void 0===t||t.call(e,n)}})]}),!m.focus&&(0,w.jsxs)("div",{className:"content-wrap",onClick:Z,children:[(0,w.jsxs)("div",{className:"content",style:{height:o},children:[a&&(0,w.jsx)("span",{className:"title",children:a}),n||(0,w.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:r})]}),n&&(0,w.jsx)(g.Z,{title:u.formatMessage({id:"common.button.clear"}),children:(0,w.jsx)(b.ZP,{className:"clear-btn",type:"text",icon:(0,w.jsx)(p.Z,{}),size:"small",onClick:function(){null==t||t({target:{value:""}})}})})]})]})},k=C.memo(Z),I=t(69070),N=t(32699),R=t.n(N),M=(0,C.forwardRef)((function(e,n){var t=e.textList,l=e.showLabel,r=void 0===l||l,i=e.sortIndex,u=void 0===i?[]:i,d=e.sortable,m=e.height,x=e.onSort,p=e.onChange,v=e.extra,j=e.onPaste,y=(0,h.useIntl)(),Z=(0,C.useRef)(0),N=(0,C.useRef)(null),M=(0,C.useRef)([]),F=function(){var e;M.current=Array.from((null===(e=N.current)||void 0===e?void 0:e.children)||[])},z=(0,C.useCallback)((function(e,n){var t=e.getBoundingClientRect(),l=n.getBoundingClientRect();return{x:l.left-t.left,y:l.top-t.top}}),[]),V=(0,C.useCallback)((function(e,n){var t=N.current;if(t){var l=Array.from(t.children);n>=l.length?t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e):t.insertBefore(e,l[n])}}),[]),L=function(e,n,t){if(n===t||n<0||t<0||n>=e.length||t>e.length)return e;var l=e.splice(n,1)[0];return e.splice(t>n?t-1:t,0,l),e},P=(0,C.useCallback)((function(){if(d&&(F(),N.current)){var e=f()(t),n=u.map((function(e,n){var t=M.current[e],l=M.current[n];if(!t||!l)return null;var a=z(t,l);return{element:t,offset:{x:a.x,y:a.y},fromIndex:e,toIndex:n}})),l=function(){var t=c()(a()().mark((function t(){var l,r,i;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=o()(n.entries()),t.prev=1,i=a()().mark((function n(){var t,l,i,o,u,c;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=s()(r.value,2),t[0],l=t[1]){n.next=3;break}return n.abrupt("return",1);case 3:return i=l.element,o=l.offset,u=l.fromIndex,c=l.toIndex,n.next=7,new Promise((function(n){i.style.opacity=.5,i.style.transform="translate(".concat(o.x,"px, ").concat(o.y,"px)"),i.style.transition="transform 0.8s,opacity 0.8s",i.addEventListener("transitionend",(function(){V(i,c),L(e,u,c),F(),i.style.opacity=1,i.style.transform="",n(null)}),{once:!0})}));case 7:case"end":return n.stop()}}),n)})),l.s();case 4:if((r=l.n()).done){t.next=10;break}return t.delegateYield(i(),"t0",6);case 6:if(!t.t0){t.next=8;break}return t.abrupt("continue",8);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(1),l.e(t.t1);case 15:return t.prev=15,l.f(),t.finish(15);case 18:null==x||x(e);case 19:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}();l()}}),[d,u,t,x,F,z]),T=function(){return Z.current=Z.current+1,Z.current},S=function(){T();var e=f()(t);e.push({text:"",uid:Z.current,name:"Text ".concat(e.length+1)}),null==p||p(e)},A=function(e){var n=f()(t),l=n.findIndex((function(n){return n.uid===e.uid}));n.splice(l,1),null==p||p(n)},B=function(e,n){var l=f()(t),a=l.findIndex((function(e){return e.uid===n.uid}));l[a].text=e,null==p||p(l)},E=R().debounce(P,100);return(0,C.useEffect)((function(){null!=u&&u.length&&E()}),[u]),(0,C.useImperativeHandle)(n,(function(){return{handleAdd:S,handleDelete:A,handleTextChange:B,setMessageId:T}})),(0,w.jsx)("div",{className:"input-list",ref:N,children:t.map((function(e,n){return(0,w.jsxs)("div",{className:"input-item","data-uid":e.uid,children:[(0,w.jsx)("div",{className:"input-wrap",children:(0,w.jsx)(k,{height:m,label:r?"".concat(n+1):null,value:e.text,placeholder:y.formatMessage({id:"playground.embedding.inputyourtext"}),onChange:function(n){return B(n.target.value,e)},onPaste:function(e){return null==j?void 0:j(e,n)}})}),(0,w.jsx)("span",{className:"btn-group",children:(0,w.jsx)(g.Z,{title:y.formatMessage({id:"common.button.delete"}),children:(0,w.jsx)(b.ZP,{danger:!0,size:"small",type:"text",icon:(0,w.jsx)(I.Z,{}),onClick:function(){return A(e)}})})}),null==v?void 0:v(e)]},e.uid)}))})})),F=C.memo(M)},10074:function(){}}]);