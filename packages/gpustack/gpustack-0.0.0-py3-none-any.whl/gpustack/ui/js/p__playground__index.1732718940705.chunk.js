"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8268],{92067:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35453),a=t(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},l=t(52273),o=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:s}))};var i=a.forwardRef(o)},81e3:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35453),a=t(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},l=t(52273),o=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:s}))};var i=a.forwardRef(o)},1404:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35453),a=t(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},l=t(52273),o=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:s}))};var i=a.forwardRef(o)},63830:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35453),a=t(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},l=t(52273),o=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:s}))};var i=a.forwardRef(o)},43211:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35453),a=t(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},l=t(52273),o=function(e,n){return a.createElement(l.Z,(0,r.Z)({},e,{ref:n,icon:s}))};var i=a.forwardRef(o)},33883:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),a=t.n(r),s=t(48305),l=t.n(s),o=t(67825),i=t.n(o),c=t(23333),u=t(76808),d=t(32699),m=t(50959),f=t(571),p=t(11527),h=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,a=e.children,s=(0,f.Z)().initialize,l=m.useRef(null);return m.useEffect((function(){l.current&&s(l.current)}),[s,l.current]),(0,p.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,p.jsx)("div",{style:{width:"max-content",maxWidth:250,paddingInline:10},children:n||t?r||a:""})})},v=m.memo(h),g=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],x=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,s=e.minWidth,o=e.ghost,f=void 0!==o&&o,h=e.title,x=e.showTitle,y=void 0!==x&&x,j=e.tooltipProps,b=i()(e,g),w=(0,m.useRef)(null),Z=(0,m.useState)(!1),k=l()(Z,2),M=k[0],S=k[1],N=((0,m.useRef)(),(0,m.useCallback)((function(){if(w.current){var e=w.current,n=e.scrollWidth,t=e.clientWidth;S(n>t)}}),[w.current]));(0,m.useEffect)((function(){var e=(0,d.throttle)(N,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[N]),(0,m.useEffect)((function(){N()}),[n,N]);var C=(0,m.useMemo)((function(){return a()({maxWidth:r,minWidth:s,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},b.style)}),[r,b.style]);return(0,p.jsx)(c.Z,a()(a()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:M||y?(0,p.jsx)(v,{isOverflowing:M,title:h,showTitle:y,children:n}):""},j),{},{children:f?(0,p.jsx)("div",{ref:w,style:C,children:n}):(0,p.jsx)(u.Z,a()(a()({},b),{},{ref:w,style:C,children:n}))}))},y=m.memo(x)},79961:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(78093),a=t(99178),s=t(87497),l=t(23333),o=t(54235),i=t(82187),c=t.n(i),u=t(32699),d=t.n(u),m=t(11527),f=function(e){var n=(0,a.useIntl)(),t=e.usage,i=e.showOutput,u=void 0===i||i,f=e.scaleable,p=e.fields,h=void 0===p?["completion_tokens","prompt_tokens"]:p;return!t||d().isEmpty(t)?null:t.error?(0,m.jsxs)(s.Z.Paragraph,{type:"danger",ellipsis:{rows:2,tooltip:null==t?void 0:t.errorMessage},style:{textAlign:"center",paddingBlock:0,margin:0,backgroundColor:"var(--ant-color-error-bg)"},children:[(0,m.jsx)(r.Z,{className:"m-r-8"}),null==t?void 0:t.errorMessage]}):(0,m.jsxs)("div",{className:c()("reference-params",{scaleable:f}),children:[(0,m.jsx)("span",{className:c()("usage",{scaleable:f}),children:(0,m.jsx)(l.Z,{title:(0,m.jsxs)(o.Z,{children:[h.includes("completion_tokens")&&(0,m.jsxs)("span",{children:[n.formatMessage({id:"playground.completion"}),":"," ",t.completion_tokens]}),h.includes("prompt_tokens")&&(0,m.jsxs)("span",{children:[n.formatMessage({id:"playground.prompt"}),":"," ",t.prompt_tokens]})]}),children:(0,m.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenusage"}),":"," ",t.total_tokens]})})}),u&&(0,m.jsx)("span",{className:c()("usage",{scaleable:f}),children:(0,m.jsx)(l.Z,{title:(0,m.jsxs)(o.Z,{children:[(0,m.jsxs)("span",{children:["TPOT: ",d().round(t.time_per_output_token_ms,2)||0," ms"]}),(0,m.jsxs)("span",{children:["TTFT: ",d().round(t.time_to_first_token_ms,2)||0," ms"]})]}),children:(0,m.jsxs)("span",{children:[n.formatMessage({id:"playground.tokenoutput"}),":"," ",d().round(t.tokens_per_second,2)||0," Tokens/s"]})})})]})}},76783:function(e,n,t){t.r(n),t.d(n,{default:function(){return _e}});var r=t(90228),a=t.n(r),s=t(87999),l=t.n(s),o=t(48305),i=t.n(o),c=t(83057),u=t(35445),d=t(93495),m=t(55592),f=t(92067),p=t(63830),h=t(55169),v=t(99178),g=t(54235),x=t(85885),y=t(96938),j=t(47946),b=t(82187),w=t.n(b),Z=t(32699),k=t.n(Z),M=t(50959),S=t(94299),N=t(35014),C=t(26068),R=t.n(C),z=t(15558),P=t.n(z),E=t(571),I=t(81117),L=t(54876),T=(t(72183),t(9298)),_=(t(51662),t(21435),t(26598)),A=(t(9763),t(42034)),F=t(81e3),O=t(23333),D=t(8267),V=t(62487),W=t(2565),G=t(11527),B=function(e){var n,t,r,s=e.updateMessage,o=e.onDelete,i=e.loading,c=e.data,u=e.editable,d=e.showTitle,m=void 0===d||d,f=e.actions,p=void 0===f?["upload","delete","copy"]:f,h=(0,v.useIntl)(),g=(0,M.useRef)(null),y=(0,M.useRef)(0),j=(0,M.useCallback)(function(){var e=l()(a()().mark((function e(n){var t,r,l,o,i,u,d;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.clipboardData||window.clipboardData,r=t.items,l=[],o=a()().mark((function e(){var n,t,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"file"===(n=r[i]).kind&&-1!==n.type.indexOf("image")?(t=n.getAsFile(),s=new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var r,a=null===(r=t.target)||void 0===r?void 0:r.result;a?e(a):n("Failed to convert image to base64")},r.readAsDataURL(t)})),l.push(s)):n.kind;case 2:case"end":return e.stop()}}),e)})),i=0;case 5:if(!(i<r.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:i++,e.next=5;break;case 10:return e.prev=10,e.next=13,Promise.all(l);case 13:(u=e.sent).length&&(d=k().map(u,(function(e){return y.current+=1,{uid:y.current,dataUrl:e}})),null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:[].concat(P()(c.imgs||[]),P()(d))})),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10);case 20:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(n){return e.apply(this,arguments)}}(),[c,s]),b=(0,M.useCallback)((function(e){null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:[].concat(P()(c.imgs||[]),P()(e))})}),[c,s]),Z=function(e){var n=k().filter(c.imgs,(function(n){return n.uid!==e}));null==s||s({role:c.role,content:c.content,uid:c.uid,imgs:n})},S=(0,M.useCallback)((function(){var e;if(c.imgs&&(null===(e=c.imgs)||void 0===e?void 0:e.length)>0){var n=P()(c.imgs||[]).pop();n&&Z(n.uid)}}),[c.imgs,Z]),N=(0,M.useCallback)((function(e){var n;"Backspace"===e.key&&""===c.content&&c.imgs&&(null===(n=c.imgs)||void 0===n?void 0:n.length)>0&&(e.preventDefault(),S())}),[c,S]);return(0,G.jsxs)("div",{className:"content-item",children:[(0,G.jsxs)("div",{className:"content-item-role",style:{display:m||p.length?"flex":"none"},children:[m&&(0,G.jsx)("div",{className:"role",children:null!==(n=c.title)&&void 0!==n?n:h.formatMessage({id:"playground.".concat(c.role)})}),(0,G.jsxs)("div",{className:"actions",children:[p.includes("upload")&&c.role===T.G7.User&&(0,G.jsx)(W.Z,{handleUpdateImgList:b}),c.content&&p.includes("copy")&&(0,G.jsx)(A.Z,{text:c.content,size:"small",shape:"default",type:"text",fontSize:"12px"}),p.includes("delete")&&(0,G.jsx)(O.Z,{title:h.formatMessage({id:"common.button.delete"}),children:(0,G.jsx)(x.ZP,{size:"small",type:"text",onClick:o,icon:(0,G.jsx)(F.Z,{})})})]})]}),u?(0,G.jsxs)("div",{className:w()("message-content-input",{"has-img":null===(t=c.imgs)||void 0===t?void 0:t.length}),onClick:function(e){e.stopPropagation(),e.preventDefault(),g.current.focus()},children:[(0,G.jsx)(V.Z,{editable:u,dataList:c.imgs||[],onDelete:Z}),(0,G.jsx)(D.Z.TextArea,{ref:g,value:c.content,variant:"filled",autoSize:{minRows:1},style:{borderRadius:"var(--border-radius-mini)"},readOnly:i,onKeyDown:N,onChange:function(e){null==s||s({imgs:c.imgs||[],role:c.role,content:e.target.value,uid:c.uid})},onPaste:function(e){e.clipboardData.getData("text")||(e.preventDefault(),j(e))}})]}):(0,G.jsxs)("div",{className:w()("content-item-content",{"has-img":null===(r=c.imgs)||void 0===r?void 0:r.length}),children:[(0,G.jsx)(V.Z,{editable:u,dataList:c.imgs||[],onDelete:Z}),c.content&&(0,G.jsx)("div",{className:"text",children:c.content})]})]})},q=M.memo(B),H=function(e){var n=e.setMessageList,t=e.messageList,r=e.editable,a=e.showTitle,s=void 0===a||a,l=e.actions,o=void 0===l?["upload","delete","copy"]:l;return(0,G.jsx)(G.Fragment,{children:!!t.length&&(0,G.jsx)("div",{className:"message-content-list",children:t.map((function(e,a){return(0,G.jsx)(q,{data:e,editable:r,actions:o,showTitle:s,onDelete:function(){return function(e){var r=P()(t);r.splice(e,1),null==n||n(r)}(a)},updateMessage:function(e){return function(e,r){var a=P()(t);a[e]=r,null==n||n(a)}(a,e)}},e.uid)}))})})},U=M.memo(H),Y=t(43943),J=t(83603),K=t(76571),$=function(e){var n=e.systemMessage,t=e.showApplyToAll,r=e.setSystemMessage,a=e.style,s=e.applyToAll,l=(0,v.useIntl)(),o=(0,M.useState)(!1),c=i()(o,2),u=c[0],d=c[1],m=M.useRef(null),f=(0,M.useState)({minRows:1,maxRows:1,focus:!1}),p=i()(f,2),h=p[0],g=p[1],y=function(){g({minRows:4,maxRows:4,focus:!0}),setTimeout((function(){var e,n;null===(e=m.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),100)};return(0,M.useEffect)((function(){u&&(null==s||s(n))}),[u]),(0,G.jsxs)("div",{className:w()("sys-message",{focus:h.focus}),style:R()({},a),children:[(0,G.jsxs)("div",{style:{display:h.focus?"block":"none"},className:"textarea-wrapper",children:[(0,G.jsx)("span",{className:"system-label",children:l.formatMessage({id:"playground.systemMessage"})}),(0,G.jsx)(D.Z.TextArea,{className:"custome-scrollbar",ref:m,variant:"filled",placeholder:l.formatMessage({id:"playground.system.tips"}),style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:h.minRows,maxRows:h.maxRows},onFocus:y,onBlur:function(e){g({minRows:1,maxRows:1,focus:!1})},allowClear:!1,onChange:function(e){r(e.target.value),u&&(null==s||s(e.target.value))}}),t&&(0,G.jsxs)("span",{className:"apply-check",onMouseDown:function(e){e.preventDefault(),d(!u)},children:[(0,G.jsx)("span",{className:"m-r-5",children:l.formatMessage({id:"playground.compare.applytoall"})}),(0,G.jsx)(J.Z,{checked:u})]}),(0,G.jsx)(K.Z,{style:{margin:"0"}})]}),!h.focus&&(0,G.jsxs)("div",{className:"sys-content-wrap",onClick:y,children:[(0,G.jsxs)("div",{className:"sys-content",children:[(0,G.jsx)("span",{className:"title",children:l.formatMessage({id:"playground.systemMessage"})}),n||(0,G.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:l.formatMessage({id:"playground.system.tips"})})]}),n&&(0,G.jsx)(O.Z,{title:l.formatMessage({id:"common.button.clear"}),children:(0,G.jsx)(x.ZP,{className:"clear-btn",type:"text",icon:(0,G.jsx)(Y.Z,{}),size:"small",onClick:function(){r("")}})})]})]})},Q=M.memo($),X=t(82092),ee=t.n(X),ne=t(75489),te=t(92233),re=t(42779),ae=t(13770),se=t(4423),le=t(68476),oe=t(40474),ie=t(96247),ce=t(26938),ue=function(e){var n=e.selectedModel,t=e.setParams,r=e.globalParams,a=e.onValuesChange,s=e.modelList,l=e.showModelSelector,o=void 0===l||l,c=(0,v.useIntl)(),u=R()({seed:null,stop:null,temperature:1,top_p:1,max_tokens:1024},r),d=le.Z.useForm(),m=i()(d,1)[0],f=(0,M.useId)();(0,M.useEffect)((function(){o?(m.setFieldsValue(R()(R()({},u),{},{model:n||k().get(s,"[0].value")})),t(R()(R()({},u),{},{model:n||k().get(s,"[0].value")}))):(m.setFieldsValue(R()(R()({},u),{},{model:n||""})),t(R()(R()({},u),{},{model:n||""})))}),[s,o,n]);var p=(0,M.useCallback)((function(e,n){null==t||t(n),null==a||a(e,n)}),[a,t]),h=(0,M.useCallback)((function(e,n){var r=m.getFieldsValue();m.setFieldsValue(R()(R()({},r),{},ee()({},n,e))),t(R()(R()({},r),{},ee()({},n,e))),null==a||a(ee()({},n,e),R()(R()({},r),{},ee()({},n,e)))}),[m,t,a]);(0,M.useEffect)((function(){m.setFieldsValue(r)}),[r]);var g=function(e){return(0,G.jsxs)("span",{className:ce.Z.label,style:{width:ae.d.mini},children:[(0,G.jsx)("span",{className:"text",children:e.description?(0,G.jsxs)(O.Z,{title:e.description,children:[(0,G.jsxs)("span",{children:[" ",e.label]}),(0,G.jsx)("span",{className:"m-l-5",children:(0,G.jsx)(se.Z,{})})]}):(0,G.jsx)("span",{children:e.label})}),(0,G.jsx)(oe.Z,{className:"label-val",variant:"outlined",size:"small",value:m.getFieldValue(e.field),controls:!1,onChange:function(n){return h(n,e.field)}})]})};return(0,G.jsx)(le.Z,{name:f,form:m,onValuesChange:p,onFinish:function(e){},onFinishFailed:function(e){},children:(0,G.jsxs)("div",{children:[o&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("h3",{className:"m-b-20 m-l-10 font-size-14 line-24",children:c.formatMessage({id:"playground.model"})}),(0,G.jsx)(le.Z.Item,{name:"model",rules:[{required:!0,message:c.formatMessage({id:"common.form.rule.select"},{name:c.formatMessage({id:"playground.model"})})}],children:(0,G.jsx)(re.Z,{showSearch:!0,options:s})})]}),(0,G.jsx)("h3",{className:"m-b-20 m-l-10 flex-between flex-center font-size-14 line-24",children:(0,G.jsx)("span",{children:c.formatMessage({id:"playground.parameters"})})}),(0,G.jsx)(le.Z.Item,{name:"temperature",rules:[{required:!1}],children:(0,G.jsx)(ne.Z,{label:g({field:"temperature",label:"Temperature",description:c.formatMessage({id:"playground.params.temperature.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,G.jsx)(ie.Z,{defaultValue:1,max:2,step:.1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("temperature")||void 0,onChange:function(e){return h(e,"temperature")}})})}),(0,G.jsx)(le.Z.Item,{name:"max_tokens",rules:[{required:!1}],children:(0,G.jsx)(ne.Z,{label:g({field:"max_tokens",label:"Max Tokens",description:c.formatMessage({id:"playground.params.maxtokens.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,G.jsx)(ie.Z,{defaultValue:1024,max:2048,step:1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("max_tokens")||void 0,onChange:function(e){return h(e,"max_tokens")}})})}),(0,G.jsx)(le.Z.Item,{name:"top_p",rules:[{required:!1}],children:(0,G.jsx)(ne.Z,{label:g({field:"top_p",label:"Top P",description:c.formatMessage({id:"playground.params.topp.tips"})}),style:{padding:"20px 2px 0"},variant:"borderless",children:(0,G.jsx)(ie.Z,{defaultValue:1,max:1,step:.1,style:{marginBottom:0,marginTop:16,marginInline:0},tooltip:{open:!1},value:m.getFieldValue("top_p")||void 0,onChange:function(e){return h(e,"top_p")}})})}),(0,G.jsx)(le.Z.Item,{name:"seed",rules:[{required:!1}],children:(0,G.jsx)(te.Z.Number,{label:"Seed",min:0,description:c.formatMessage({id:"playground.params.seed.tips"}),style:{width:ae.d.mini}})}),(0,G.jsx)(le.Z.Item,{name:"stop",rules:[{required:!1}],normalize:function(e){return e||null},children:(0,G.jsx)(te.Z.Input,{allowClear:!0,label:"Stop Sequence",description:c.formatMessage({id:"playground.params.stop.tips"}),style:{width:ae.d.mini}})})]})})},de=(0,M.memo)(ue),me=t(79961),fe=t(19748),pe=(0,M.forwardRef)((function(e,n){var t=e.modelList,r=(0,M.useRef)(0),s=(0,M.useState)([]),o=i()(s,2),c=o[0],u=o[1],d=(0,v.useIntl)(),m=(0,v.useSearchParams)(),f=i()(m,1)[0].get("model")||"",p=(0,M.useState)({}),h=i()(p,2),g=h[0],x=h[1],y=(0,M.useState)(""),j=i()(y,2),b=j[0],Z=j[1],S=(0,M.useState)(!1),C=i()(S,2),z=C[0],A=C[1],F=(0,M.useState)(!1),O=i()(F,2),D=O[0],V=O[1],W=(0,M.useState)(null),B=i()(W,2),q=B[0],H=B[1],Y=(0,M.useState)(!1),J=i()(Y,2),K=J[0],$=J[1],X=(0,M.useRef)(""),ee=(0,M.useRef)(null),ne=(0,M.useRef)(null),te=(0,M.useRef)(null),re=(0,M.useRef)(null),ae=(0,M.useRef)(0),se=(0,E.Z)(),le=se.initialize,oe=se.updateScrollerPosition,ie=(0,E.Z)().initialize;(0,M.useImperativeHandle)(n,(function(){return{viewCode:function(){A(!0)},setCollapse:function(){$(!K)},collapse:K}}));var ce=(0,M.useMemo)((function(){return(0,T.kA)([{role:T.G7.System,content:b}].concat(P()(c)))}),[c,b]),ue=function(){r.current=r.current+1},pe=function(e){var n;H(R()({},null!==(n=null==e?void 0:e.usage)&&void 0!==n?n:{})),e&&k().get(e,"choices",[]).length&&(X.current=X.current+k().get(e,"choices.0.delta.content",""),u([].concat(P()(c),P()(te.current),[{role:T.G7.Assistant,content:X.current,uid:r.current}])))},he=function(){var e=l()(a()().mark((function e(n){var t,s,l,o,i,d,m,f,p,h,v;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.model){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,V(!0),ue(),H(null),null===(t=ee.current)||void 0===t||null===(s=t.abort)||void 0===s||s.call(t),ee.current=new AbortController,l=ee.current.signal,te.current=n?[R()(R()({},n),{},{uid:r.current})]:[],X.current="",u((function(e){return[].concat(P()(e),P()(te.current))})),o=[{role:T.G7.System,content:b}].concat(P()(c),P()(te.current)),i=(0,T.kA)(o),d=R()(R()({messages:i},g),{},{stream:!0,stream_options:{include_usage:!0}}),e.next=17,(0,I.U3)({data:d,url:N.qt,signal:l});case 17:if(null==(m=e.sent)||!m.error){e.next=21;break}return H({error:!0,errorMessage:(null==m||null===(f=m.data)||void 0===f||null===(f=f.error)||void 0===f?void 0:f.message)||(null==m||null===(p=m.data)||void 0===p?void 0:p.message)||""}),e.abrupt("return");case 21:return ue(),h=m.reader,v=m.decoder,e.next=25,(0,I.LN)(h,v,(function(e){var n;null!=e&&e.error?H({error:!0,errorMessage:(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||""}):pe(e)}));case 25:e.next=29;break;case 27:e.prev=27,e.t0=e.catch(2);case 29:return e.prev=29,V(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,27,29,32]])})));return function(n){return e.apply(this,arguments)}}();return(0,M.useEffect)((function(){ne.current&&le(ne.current)}),[ne.current,le]),(0,M.useEffect)((function(){re.current&&ie(re.current)}),[re.current,ie]),(0,M.useEffect)((function(){D&&oe()}),[c,D]),(0,M.useEffect)((function(){c.length>ae.current&&oe(),ae.current=c.length}),[c.length]),(0,G.jsxs)("div",{className:"ground-left-wrapper",children:[(0,G.jsxs)("div",{className:"ground-left",children:[(0,G.jsx)("div",{className:"message-list-wrap",ref:ne,children:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{style:{marginBottom:20},children:(0,G.jsx)(Q,{style:{borderRadius:"var(--border-radius-mini)",overflow:"hidden"},systemMessage:b,setSystemMessage:Z})}),(0,G.jsxs)("div",{className:"content",children:[(0,G.jsx)(U,{messageList:c,setMessageList:u,editable:!0,loading:D}),D&&(0,G.jsx)(L.Z,{size:"small",children:(0,G.jsx)("div",{style:{height:"46px"}})})]})]})}),q&&(0,G.jsx)("div",{style:{height:40},children:(0,G.jsx)(me.Z,{usage:q})}),(0,G.jsx)("div",{className:"ground-left-footer",children:(0,G.jsx)(_.Z,{loading:D,disabled:!g.model,isEmpty:!c.length,handleSubmit:function(e){var n,t=e.content||null!==(n=e.imgs)&&void 0!==n&&n.length?e:void 0;he(t)},addMessage:function(e){var n,t=e||{role:(null===(n=k().last(c))||void 0===n?void 0:n.role)===T.G7.User?T.G7.Assistant:T.G7.User,content:""};c.push(R()(R()({},t),{},{uid:r.current+1})),ue(),u(P()(c))},handleAbortFetch:function(){var e,n;null===(e=ee.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),V(!1)},clearAll:function(){c.length&&(ue(),u([]),H(null))},setModelSelections:function(){},presetPrompt:function(e){var n,t=e.filter((function(e){return"system"===e.role})),a=e.filter((function(e){return"user"===e.role})).map((function(e){return ue(),R()(R()({},e),{},{uid:r.current})}));Z((null===(n=t[0])||void 0===n?void 0:n.content)||""),u(a)},modelList:t})})]}),(0,G.jsx)("div",{className:w()("params-wrapper",{collapsed:K}),ref:re,children:(0,G.jsx)("div",{className:"box",children:(0,G.jsx)(de,{setParams:x,params:g,selectedModel:f,modelList:t})})}),(0,G.jsx)(fe.Z,R()(R()({},T.NW.chat),{},{open:z,payLoad:{messages:ce},parameters:g,onCancel:function(){A(!1)},title:d.formatMessage({id:"playground.viewcode"})}))]})})),he=(0,M.memo)(pe),ve=M.createContext({}),ge=t(23010),xe=t(87497),ye=function(e){var n=e.style,t=(0,v.useIntl)();(0,v.useNavigate)();return(0,G.jsx)("div",{className:"flex-center  justify-center",style:R()({},n),children:(0,G.jsx)(ge.Z,{image:ge.Z.PRESENTED_IMAGE_SIMPLE,description:(0,G.jsx)("div",{className:"flex-column",children:(0,G.jsx)(xe.Z.Text,{type:"secondary",children:t.formatMessage({id:"playground.model.noavailable"})})})})})},je=t(81745),be=t(7922),we=t(33883),Ze=t(51076),ke=t(69070),Me=t(1404),Se=t(43211),Ne=t(60857),Ce=t(8964),Re=t(40918),ze=(0,M.forwardRef)((function(e,n){var t=e.model,r=e.modelList,s=e.instanceId,o=(0,M.useContext)(ve),u=o.globalParams,d=o.setGlobalParams,m=o.setLoadingStatus,f=o.handleDeleteModel,p=o.handleApplySystemChangeToAll,h=o.modelFullList,g=o.loadingStatus,y=(0,v.useIntl)(),j=(0,M.useRef)(!1),b=(0,M.useState)(""),w=i()(b,2),Z=w[0],S=w[1],C=(0,M.useState)({model:t}),z=i()(C,2),_=z[0],A=z[1],F=(0,M.useState)(!1),O=i()(F,2),D=O[0],V=(O[1],(0,M.useRef)(0)),W=(0,M.useState)([]),B=i()(W,2),q=B[0],H=B[1],Y=(0,M.useState)(null),K=i()(Y,2),$=K[0],X=K[1],ee=(0,M.useState)(!1),ne=i()(ee,2),te=ne[0],re=ne[1],ae=(0,M.useRef)(""),se=(0,M.useRef)(null),le=(0,M.useRef)([]),oe=(0,M.useRef)(null),ie=(0,M.useRef)(0),ce=(0,E.Z)(),ue=ce.initialize,pe=ce.updateScrollerPosition,he=(0,M.useMemo)((function(){return(0,T.kA)([{role:T.G7.System,content:Z}].concat(P()(q)))}),[q,Z]),ge=function(){V.current=V.current+1},xe=function(){var e,n;null===(e=se.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),m(s,!1)},ye=function(e){var n;X(R()({},null!==(n=null==e?void 0:e.usage)&&void 0!==n?n:{})),e&&k().get(e,"choices",[].length)&&(ae.current=ae.current+k().get(e,"choices.0.delta.content",""),H([].concat(P()(q),P()(le.current),[{role:T.G7.Assistant,content:ae.current,uid:V.current}])))},je=function(){var e=l()(a()().mark((function e(n){var t,r,l,o,i,c,u,d,f,p,h;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.model){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(s,!0),ge(),null===(t=se.current)||void 0===t||null===(r=t.abort)||void 0===r||r.call(t),se.current=new AbortController,l=se.current.signal,le.current=n?[R()(R()({},n),{},{uid:V.current})]:[],H((function(e){return[].concat(P()(e),P()(le.current))})),ae.current="",o=[{role:T.G7.System,content:Z}].concat(P()(q),P()(le.current)),i=(0,T.kA)(o),c=R()(R()({messages:i},_),{},{stream:!0,stream_options:{include_usage:!0}}),e.next=16,(0,I.U3)({data:c,url:N.qt,signal:l});case 16:if(null==(u=e.sent)||!u.error){e.next=20;break}return X({error:!0,errorMessage:(null==u||null===(d=u.data)||void 0===d||null===(d=d.error)||void 0===d?void 0:d.message)||(null==u||null===(f=u.data)||void 0===f?void 0:f.message)||""}),e.abrupt("return");case 20:return ge(),p=u.reader,h=u.decoder,e.next=24,(0,I.LN)(p,h,(function(e){var n;null!=e&&e.error?X({error:!0,errorMessage:(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||""}):ye(e)}));case 24:e.next=28;break;case 26:e.prev=26,e.t0=e.catch(2);case 28:return e.prev=28,m(s,!1),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,26,28,31]])})));return function(n){return e.apply(this,arguments)}}(),be=function(e){var n,t=e.content||null!==(n=e.imgs)&&void 0!==n&&n.length?e:void 0;je(t)},ze=(0,M.useCallback)((function(e,n){j.current?(A(R()(R()({},_),n)),d(R()({},n))):A(R()(R()({},_),e))}),[_,j.current]),Pe=function(){H([]),X(null),le.current=[]},Ee=function(e){ge(),H((function(n){return[].concat(P()(n),[R()(R()({},e),{},{uid:V.current})])}))},Ie=function(e){le.current=[];var n=k().map(e,(function(e){return ge(),{role:e.role,content:e.content,uid:V.current}}));X(null),H(n)},Le=((0,M.useMemo)((function(){return h.filter((function(e){return"empty"!==e.type}))}),[h]),(0,M.useMemo)((function(){var e=[{label:y.formatMessage({id:"common.button.clear"}),key:"clear",icon:(0,G.jsx)(Ze.Z,{}),danger:!1,onClick:function(){H([]),S("")}},{label:y.formatMessage({id:"playground.viewcode"}),key:"viewcode",icon:(0,G.jsx)(c.Z,{type:"icon-code"}),onClick:function(){re(!0)}}];return r.length>2&&e.push({label:y.formatMessage({id:"common.button.delete"}),key:"delete",icon:(0,G.jsx)(ke.Z,{}),danger:!0,onClick:function(){f(s)}}),e}),[r,y]));return(0,M.useEffect)((function(){A(R()(R()({},_),u))}),[u]),(0,M.useEffect)((function(){return function(){xe()}}),[]),(0,M.useEffect)((function(){oe.current&&ue(oe.current)}),[oe.current,ue]),(0,M.useEffect)((function(){g[s]&&pe()}),[q]),(0,M.useEffect)((function(){q.length>ie.current&&pe(),ie.current=q.length}),[q.length]),(0,M.useImperativeHandle)(n,(function(){return{submit:be,abortFetch:xe,addNewMessage:Ee,clear:Pe,presetPrompt:Ie,setSystemMessage:S,loading:D}})),(0,G.jsxs)("div",{className:"model-item",children:[(0,G.jsxs)("div",{className:"header",children:[(0,G.jsx)("span",{className:"title",children:(0,G.jsx)(Ne.default,{style:{width:"100%"},variant:"borderless",options:h,onChange:function(e){A(R()(R()({},_),{},{model:e})),Pe()},value:_.model,labelRender:function(e){return(0,G.jsx)(we.Z,{ghost:!0,tooltipProps:{placement:"right"},minWidth:60,maxWidth:180,children:e.label})},optionRender:function(e){return(0,G.jsx)(we.Z,{ghost:!0,tooltipProps:{placement:"right"},minWidth:60,maxWidth:180,children:e.label})}})}),(0,G.jsx)(me.Z,{usage:$,scaleable:!0}),(0,G.jsxs)("span",{className:"action",children:[(0,G.jsx)(Ce.Z,{menu:{items:Le},placement:"bottomRight",children:(0,G.jsx)(x.ZP,{type:"text",icon:(0,G.jsx)(Me.Z,{style:{fontSize:"14px"}}),size:"small"})}),(0,G.jsx)(Re.Z,{placement:"bottomRight",content:(0,G.jsx)(de,{showModelSelector:!1,setParams:A,modelList:r,globalParams:u,selectedModel:_.model,onValuesChange:ze}),trigger:["click"],arrow:!1,fresh:!0,title:(0,G.jsx)("div",{children:(0,G.jsx)(J.Z,{onChange:function(e){j.current=e.target.checked,e.target.checked&&d(R()({},k().omit(_,"model")))},children:y.formatMessage({id:"playground.compare.applytoall"})})}),children:(0,G.jsx)(x.ZP,{type:"text",icon:(0,G.jsx)(Se.Z,{}),size:"small"})})]})]}),(0,G.jsx)(Q,{showApplyToAll:!0,systemMessage:Z,applyToAll:p,setSystemMessage:S}),(0,G.jsx)("div",{className:"content",ref:oe,children:(0,G.jsxs)("div",{children:[(0,G.jsx)(U,{messageList:q,setMessageList:H,editable:!0}),(0,G.jsx)(L.Z,{spinning:!!g[s],size:"small",style:{width:"100%"}})]})}),(0,G.jsx)(fe.Z,R()(R()({},T.NW.chat),{},{open:te,payLoad:{messages:he},parameters:_,onCancel:function(){re(!1)},title:y.formatMessage({id:"playground.viewcode"})}))]})})),Pe=M.memo(ze),Ee=function(e){var n=e.spans,t=e.modelSelections,r=e.setModelRefs;return(0,G.jsx)(je.Z,{gutter:[16,0],style:{height:"100%"},children:t.map((function(e,a){return(0,G.jsx)(be.Z,{span:n.span,style:{height:n.count<4?"calc(100% - 16px)":"calc(50% - 16px)"},children:(0,G.jsx)(Pe,{ref:function(n){return r(e.instanceId,n)},instanceId:e.instanceId,modelList:t,model:e.value},"".concat(e.value||"empty","-").concat(e.uid))},"".concat(e.value||"empty","-").concat(e.uid))}))})},Ie=M.memo(Ee),Le=function(e){var n=e.modelList,t=e.loaded,r=(0,E.Z)().initialize,s=(0,M.useState)({}),o=i()(s,2),c=o[0],u=o[1],d=(0,M.useState)([]),m=i()(d,2),f=m[0],p=m[1],h=(0,M.useState)({seed:null,stop:null,temperature:1,top_p:1,max_tokens:1024}),v=i()(h,2),g=v[0],x=v[1],y=(0,M.useState)({span:12,count:2}),j=i()(y,2),b=j[0],w=j[1],Z=(0,M.useRef)({}),S=(0,M.useRef)({}),N=(0,M.useRef)(null),C=(0,M.useMemo)((function(){return Object.getOwnPropertySymbols(c).some((function(e){return c[e]}))}),[c]),z=(0,M.useMemo)((function(){return n.map((function(e){return R()(R()({},e),{},{disabled:f.some((function(n){return n.value===e.value}))})}))}),[n,f]),P=function(e){return Z.current[e]=k().add(Z.current[e],1),Z.current[e]},I=(0,M.useCallback)((function(e,n){S.current[e]=n}),[]);return(0,M.useEffect)((function(){S.current={};var e=k().take(n,b.count);if(e.length<b.count&&e.length>0){var t=b.count-e.length,r=Array.from({length:t},(function(e,n){return{label:"",value:"",type:"empty"}}));e=k().concat(e,r)}var a=e.map((function(e){return R()(R()({},e),{},{uid:P(e.value||"empty"),instanceId:"empty"===e.type?Symbol("empty"):Symbol(e.value)})}));p(a)}),[n]),(0,M.useEffect)((function(){N.current&&r(N.current)}),[N.current,r]),(0,G.jsxs)("div",{className:"multiple-chat",style:{height:"calc(100vh - 72px)"},children:[(0,G.jsx)("div",{className:"chat-list",ref:N,children:n.length>0?(0,G.jsx)(ve.Provider,{value:{spans:b,globalParams:g,loadingStatus:c,modelFullList:n,handleApplySystemChangeToAll:function(e){Object.getOwnPropertySymbols(S.current).forEach((function(n){var t=S.current[n];null==t||t.setSystemMessage(e)}))},setGlobalParams:x,setLoadingStatus:function(e,n){u((function(t){var r=R()({},t);return r[e]=n,r}))},handleDeleteModel:function(e){var n,t=f.filter((function(n){return n.instanceId!==e}));!function(e){S.current[e]=null,c[e]=!1}(e),n=b.count-1,6===b.count?w({span:8,count:n}):5===b.count?w({span:12,count:n}):4===b.count?w({span:8,count:n}):3===b.count&&w({span:12,count:n}),p(t)}},children:(0,G.jsx)(Ie,{spans:b,modelSelections:f,setModelRefs:I})}):t&&(0,G.jsx)(ye,{style:{height:"100%",paddingBottom:60}})}),(0,G.jsx)("div",{children:(0,G.jsx)(_.Z,{scope:"compare",loading:C,disabled:C||!f.length||!n.length,handleSubmit:function(e){Object.getOwnPropertySymbols(S.current).forEach((function(n){var t=S.current[n];null==t||t.submit(e)}))},addMessage:function(e){Object.getOwnPropertySymbols(S.current).forEach((function(n){var t=S.current[n];null==t||t.addNewMessage(e)}))},handleAbortFetch:function(){Object.getOwnPropertySymbols(S.current).forEach((function(e){var n=S.current[e];null==n||n.abortFetch()}))},clearAll:function(){Object.getOwnPropertySymbols(S.current).forEach((function(e){var n=S.current[e];null==n||n.clear()}))},updateLayout:function(e){w(e),function(e){var t=f;if(t.length<e.count){var r=e.count-t.length,a=k().slice(n,t.length,t.length+r),s=Array.from({length:r-a.length},(function(e,n){return{label:"",value:"",type:"empty"}})),l=k().concat(a,s).map((function(e){return R()(R()({},e),{},{uid:P(e.value||"empty"),instanceId:"empty"===e.type?Symbol("empty"):Symbol(e.value)})}));p(k().concat(t,l))}else if(t.length>e.count){var o=t.slice(0,e.count);p(o)}}(e)},setModelSelections:function(e){var n=e.map((function(e){return R()(R()({},e),{},{uid:P(e.value),instanceId:Symbol(e.value)})})),t=k().concat(f,n),r=Math.floor(24/t.length);w({span:r<8?8:r,count:b.count}),p(t)},presetPrompt:function(e){var n=e.filter((function(e){return"system"===e.role})),t=e.filter((function(e){return"user"===e.role}));Object.getOwnPropertySymbols(S.current).forEach(function(){var e=l()(a()().mark((function e(r){var s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(s=S.current[r])||s.presetPrompt(t),null==s||s.setSystemMessage(k().get(n,"0.content",""));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},modelList:z,showModelSelection:!1})})]})},Te=(0,M.memo)(Le),_e=(t(20988),function(){var e=(0,v.useIntl)(),n=(0,m.Z)().size,t=(0,M.useState)("chat"),r=i()(t,2),s=r[0],o=r[1],b=(0,M.useRef)(null),Z=(0,M.useRef)(null),C=(0,M.useState)([]),R=i()(C,2),z=R[0],P=R[1],E=(0,M.useState)(!1),I=i()(E,2),L=I[0],T=I[1],_=[{label:e.formatMessage({id:"menu.playground.chat"}),value:"chat",icon:(0,G.jsx)(f.Z,{})},{label:e.formatMessage({id:"menu.compare"}),value:"compare",icon:(0,G.jsx)(p.Z,{})}],A=(0,M.useCallback)((function(){var e,n;if("reranker"===s)null===(e=Z.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e);else if("chat"===s){var t,r;null===(t=b.current)||void 0===t||null===(r=t.viewCode)||void 0===r||r.call(t)}}),[b,Z,s]),F=(0,M.useCallback)((function(){var e,n,t,r;"reranker"!==s?null===(e=b.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e):null===(t=Z.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t)}),[b,Z,s]),O=[{key:"chat",label:"Chat",children:(0,G.jsx)(he,{ref:b,modelList:z})},{key:"compare",label:"Compare",children:(0,G.jsx)(Te,{modelList:z,loaded:L})}];(0,M.useEffect)((function(){var e,t,r;n.width<u.Z.lg&&(null!==(e=b.current)&&void 0!==e&&e.collapse||null===(t=b.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t))}),[n.width]),(0,M.useEffect)((function(){var e=function(){var e=l()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={embedding_only:!1},e.next=4,(0,N.nb)(n);case 4:return t=e.sent,r=k().map(t.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(a()().mark((function n(){var t;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:t=n.sent,P(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),T(!0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,S.y1)(d.ZP.RIGHT.join(","),(function(){var e,n;null===(e=b.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),{preventDefault:!0}),(0,G.jsx)(h._z,{ghost:!0,header:{title:(0,G.jsxs)("div",{className:"flex items-center",children:[(0,G.jsx)("span",{className:"font-600",children:e.formatMessage({id:"menu.playground.chat"})}),(0,G.jsx)(y.Z,{options:_,size:"middle",className:"m-l-40",onChange:function(e){return o(e)}})]}),breadcrumb:{}},extra:"compare"!==s&&(0,G.jsxs)(g.Z,{children:[(0,G.jsx)(x.ZP,{size:"middle",onClick:A,icon:(0,G.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,G.jsx)(x.ZP,{size:"middle",onClick:F,icon:(0,G.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:w()("playground-container",{compare:"compare"===s,chat:"compare"!==s}),children:(0,G.jsx)("div",{className:"play-ground",children:(0,G.jsx)("div",{className:"chat",children:(0,G.jsx)(j.Z,{items:O,activeKey:s})})})})})},81117:function(e,n,t){t.d(n,{LN:function(){return f},U3:function(){return m},YT:function(){return p}});var r=t(90228),a=t.n(r),s=t(26068),l=t.n(s),o=t(87999),i=t.n(o),c=t(55360),u=/data:\s*({.*?})(?=\n|$)/g,d=function(e){var n,t=[];if(!e)return t;for(;null!==(n=u.exec(e));)try{var r=JSON.parse(n[1]);t.push(r)}catch(e){continue}return t},m=function(){var e=i()(a()().mark((function e(n){var t,r,s,o,i,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.method||"POST",s=n.url,n.params&&(s="".concat(s,"?").concat(c.Z.stringify(n.params))),e.next=5,fetch(s,{method:r,body:"POST"===r?JSON.stringify(n.data):null,signal:n.signal,headers:l()({"Content-Type":"application/json"},n.headers)});case 5:if((o=e.sent).ok){e.next=12;break}return e.next=10,o.json();case 10:return e.t0=e.sent,e.abrupt("return",{error:!0,data:e.t0});case 12:return i=null==o||null===(t=o.body)||void 0===t?void 0:t.getReader(),u=new TextDecoder("utf-8",{fatal:!0}),e.abrupt("return",{reader:i,decoder:u});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=i()(a()().mark((function e(n,t,r){var s,l,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(s=e.sent,l=s.done,o=s.value,!l){e.next=7;break}return e.abrupt("return");case 7:return i=t.decode(o,{stream:!0}),d(i).forEach((function(e){null==r||r(e)})),e.next=11,f(n,t,r);case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),p=function(){var e=i()(a()().mark((function e(n,t,r){var s,l;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="",l=function(){var e=i()(a()().mark((function e(){var o,i,c,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.read();case 2:if(o=e.sent,i=o.done,c=o.value,!i){e.next=8;break}if(s)try{d(s).forEach((function(e){null==r||r(e)}))}catch(e){}return e.abrupt("return");case 8:return s+=t.decode(c,{stream:!0}),d(s).forEach((function(e){null==r||r(e)})),u=s.lastIndexOf("}"),s=-1!==u?s.slice(u+1):s,e.next=15,l();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()}}]);