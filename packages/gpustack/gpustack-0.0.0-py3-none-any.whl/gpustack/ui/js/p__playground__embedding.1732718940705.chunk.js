"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{49662:function(e,n,t){var r=t(78093),i=t(87497),a=t(50959),l=t(11527),o=function(e){var n=e.message,t=e.type,a=e.rows,o=void 0===a?1:a;return n?(0,l.jsxs)(i.Z.Paragraph,{type:t,ellipsis:{rows:o,tooltip:n},style:{textAlign:"center",padding:"2px 5px",borderRadius:"var(--border-radius-base)",margin:0,backgroundColor:"var(--ant-color-error-bg)"},children:[(0,l.jsx)(r.Z,{className:"m-r-8"}),n]}):null};n.Z=a.memo(o)},33883:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),i=t.n(r),a=t(48305),l=t.n(a),o=t(67825),s=t.n(o),c=t(23333),u=t(76808),d=t(32699),f=t(50959),p=t(571),m=t(11527),h=function(e){var n=e.isOverflowing,t=e.showTitle,r=e.title,i=e.children,a=(0,p.Z)().initialize,l=f.useRef(null);return f.useEffect((function(){l.current&&a(l.current)}),[a,l.current]),(0,m.jsx)("div",{style:{maxHeight:200,overflowY:"auto"},ref:l,children:(0,m.jsx)("div",{style:{width:"max-content",maxWidth:250,paddingInline:10},children:n||t?r||i:""})})},g=f.memo(h),x=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps"],v=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,a=e.minWidth,o=e.ghost,p=void 0!==o&&o,h=e.title,v=e.showTitle,y=void 0!==v&&v,b=e.tooltipProps,j=s()(e,x),w=(0,f.useRef)(null),N=(0,f.useState)(!1),C=l()(N,2),S=C[0],k=C[1],Z=((0,f.useRef)(),(0,f.useCallback)((function(){if(w.current){var e=w.current,n=e.scrollWidth,t=e.clientWidth;k(n>t)}}),[w.current]));(0,f.useEffect)((function(){var e=(0,d.throttle)(Z,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[Z]),(0,f.useEffect)((function(){Z()}),[n,Z]);var z=(0,f.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},j.style)}),[r,j.style]);return(0,m.jsx)(c.Z,i()(i()({overlayInnerStyle:{paddingInline:0},destroyTooltipOnHide:!1,title:S||y?(0,m.jsx)(g,{isOverflowing:S,title:h,showTitle:y,children:n}):""},b),{},{children:p?(0,m.jsx)("div",{ref:w,style:z,children:n}):(0,m.jsx)(u.Z,i()(i()({},j),{},{ref:w,style:z,children:n}))}))},y=f.memo(v)},71835:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(32699),i=t(50959),a=t(16222),l=t(13916),o=t(25620),s=t(953),c=t(4853),u=t(22241),d=t(99182),f=t(2177),p=t(19090),m=t(8725),h=t(62493),g=t(56031),x=t(7119),v=t(56262),y=t(83616),b=t(19175);g.D([c.N,u.N,d.N,f.N,p.N,m.N,h.N,a.N,l.N,o.N,s.N,v.T,y.z,b.N]);var j=x,w=t(11527),N=(0,i.forwardRef)((function(e,n){var t=e.options,a=e.width,l=e.height,o=(0,i.useRef)(null),s=(0,i.useRef)(),c=(0,i.useRef)(!1),u=(0,i.useRef)();(0,i.useImperativeHandle)(n,(function(){return{chart:s.current}}));var d=(0,i.useCallback)((function(){var e;o.current&&(null===(e=s.current)||void 0===e||e.clear(),s.current=j.init(o.current))}),[]),f=(0,i.useCallback)((function(){var e;null===(e=s.current)||void 0===e||e.resize()}),[]),p=(0,i.useCallback)((function(e){var n,t;null===(n=s.current)||void 0===n||n.clear(),null===(t=s.current)||void 0===t||t.setOption(e,{notMerge:!0,lazyUpdate:!0})}),[]);return(0,i.useEffect)((function(){return o.current&&d(),function(){var e;null===(e=s.current)||void 0===e||e.dispose()}}),[d]),(0,i.useEffect)((function(){c.current=!1,f(),p(t),c.current=!0}),[t]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;c.current&&(null===(e=s.current)||void 0===e||e.resize())}),100);return o.current&&(u.current=new ResizeObserver(e),u.current.observe(o.current)),function(){var e;o.current&&(null===(e=u.current)||void 0===e||e.unobserve(o.current))}}),[]),(0,w.jsx)("div",{className:"chart-wrapper",style:{width:a,height:l},children:(0,w.jsx)("div",{ref:o,style:{width:a,height:l}})})})),C=N},7086:function(e,n,t){t.d(n,{Gl:function(){return s},Md:function(){return a},Rf:function(){return c},TN:function(){return u},eC:function(){return l},j3:function(){return o},tN:function(){return d},yy:function(){return p},zt:function(){return f}});var r=t(32699),i="rgba(0, 0, 0, 0.4)",a={trigger:"axis",formatter:function(e,n){var t='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var i=(0,r.isFunction)(n)?null==n?void 0:n(e.data.value):e.data.value;t+='<span class="tooltip-item">\n     <span class="tooltip-item-name">\n       <span style="display:inline-block;margin-right:5px;border-radius:8px;width:8px;height:8px;background-color:'.concat(e.color,';"></span>\n       <span class="tooltip-title">').concat(e.seriesName,'</span>:\n     </span>\n      <span class="tooltip-value">').concat(i,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(t,"</div>")}},l={left:0,right:20,bottom:20,containLabel:!0},o={itemWidth:8,itemHeight:8},s={type:"category",axisTick:{show:!0,lineStyle:{color:"rgba(217,217,217,0.5)"}},axisLabel:{color:i,fontSize:12},axisLine:{show:!1}},c={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisLabel:{color:i,fontSize:12},axisTick:{show:!1},type:"value"},u={show:!0,left:"center",textStyle:{fontSize:12,color:"#000"},text:""},d={type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},f={type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},p={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-12,length:6,splitNumber:5,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},splitLine:{distance:-12,length:12,lineStyle:{width:1.5,color:"rgba(255, 255, 255, 1)"}},axisLabel:{distance:14,color:"rgba(0, 0, 0, .5)",fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:"rgba(0, 0, 0, 0.88)",formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:"500",color:"rgba(0, 0, 0, 0.88)"},unit:{fontSize:14,color:"rgba(0, 0, 0, 0.88)",fontWeight:"500",padding:[0,0,0,2]}}}}},20946:function(e,n,t){var r=t(23010),i=(t(50959),t(11527));n.Z=function(e){var n=e.height,t=e.title;return(0,i.jsxs)("div",{style:{width:"100%",height:n||"100%"},className:"flex-center  flex-column ",children:[t&&(0,i.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:t}),(0,i.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,i.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},19748:function(e,n,t){var r=t(26068),i=t.n(r),a=t(31759),l=t.n(a),o=t(48305),s=t.n(o),c=t(16850),u=t(16333),d=t(90515),f=t(99178),p=t(1956),m=t(85885),h=t(32699),g=t.n(h),x=t(50959),v=t(11527),y="bash",b="python",j="javascript",w=[{label:"Curl",value:y},{label:"Python",value:b},{label:"Nodejs",value:j}],N=function(e){var n=e||{},t=n.title,r=n.open,a=n.api,o=n.clientType,h=n.logcommand,N=n.onCancel,C=n.payLoad,S=n.parameters,k=void 0===S?{}:S,Z=(0,f.useIntl)(),z=(0,x.useState)(y),M=s()(z,2),R=M[0],P=M[1],L="".concat(window.location.origin,"/v1-openai"),T=(0,x.useMemo)((function(){var e=h?"console.log(response.".concat(h,");\n"):"",n=h?"print(response.".concat(h,")"):"";if(R===y)return"curl ".concat(window.location.origin,"/v1-openai/").concat(a,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\\n-d \'').concat(JSON.stringify(i()(i()({},k),C),null,2),"'");if(R===j)return'const OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(L,'"\n});\n\nasync function main(){\n  const params = ').concat(JSON.stringify(i()(i()({},k),C),null,4),";\nconst response = await openai.").concat(o,"(params);\n  ").concat(e,"}\nmain();");if(R===b){var t=g().keys(k).reduce((function(e,n){if(null===k[n])return e;var t="string"==typeof k[n]?'"'.concat(k[n],'"'):k[n];return e+"  ".concat(n,"=").concat(t,",\n")}),""),r=function(e){return g().keys(e).reduce((function(n,t){if(null===e[t])return n;var r="object"===l()(e[t])?JSON.stringify(e[t],null,2):'"'.concat(e[t],'"');return n+"  ".concat(t,"=").concat(r,",\n")}),"")}(C);return'from openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(L,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.').concat(o,"(\n").concat(t).concat(r,")\n").concat(n)}return""}),[R,C,k,a,o,h]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(p.Z,{title:t,open:r,centered:!0,onCancel:function(){P(y),N()},destroyOnClose:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,footer:null,children:[(0,v.jsx)("div",{style:{marginBottom:"10px"},children:Z.formatMessage({id:"playground.viewcode.info"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)(c.Z,{copyText:T,langOptions:w,defaultValue:y,showHeader:!0,onChangeLang:function(e){P(e)},styles:{wrapper:{backgroundColor:"var(--color-editor-dark)"}},children:(0,v.jsx)("div",{style:{paddingRight:2,paddingBottom:2},children:(0,v.jsx)(u.Z,{height:380,theme:"dark",code:T,lang:R,copyable:!1})})}),(0,v.jsxs)("div",{style:{marginTop:10,display:"flex",alignItems:"baseline"},children:[(0,v.jsx)(d.Z,{className:"m-r-8"}),(0,v.jsx)("span",{children:Z.formatMessage({id:"playground.viewcode.tips"},{here:(0,v.jsx)(m.ZP,{type:"link",size:"small",href:"#/api-keys",target:"_blank",style:{paddingInline:2},children:(0,v.jsxs)("span",{children:[" ",Z.formatMessage({id:"playground.viewcode.here"})]})})})})]})]})]})})};n.Z=x.memo(N)},9298:function(e,n,t){t.d(n,{G7:function(){return r},NW:function(){return a},kA:function(){return i}});t(26068),t(32699);var r={User:"user",Assistant:"assistant",System:"system"},i=(r.User,r.Assistant,function(e){if(!e.length)return[];var n=[];return e.forEach((function(e){var t;if(null!==(t=e.imgs)&&void 0!==t&&t.length){var r=e.imgs.map((function(e){return{type:"image_url",image_url:{url:e.dataUrl}}}));n.push({role:e.role,content:r})}e.content&&n.push({role:e.role,content:e.content})})),n}),a={chat:{api:"chat/completions",clientType:"chat.completions.create",logcommand:"choices[0].message.content"},embeddings:{api:"embeddings",clientType:"embedding.create",logcommand:"data[0].embedding"},images:{api:"images/generations",clientType:"images.generate",logcommand:"data[0].b64_json"}}},70046:function(e,n,t){t.r(n),t.d(n,{default:function(){return oe}});var r=t(90228),i=t.n(r),a=t(87999),l=t.n(a),o=t(48305),s=t.n(o),c=t(83057),u=t(93495),d=t(55169),f=t(99178),p=t(54235),m=t(85885),h=t(82187),g=t.n(h),x=t(32699),v=t.n(x),y=t(50959),b=t(94299),j=t(35014),w=t(26068),N=t.n(w),C=t(15558),S=t.n(C),k=t(49662),Z=t(71835),z=t(7086),M=t(20946),R=t(11527),P={animation:!1,grid:N()(N()({},z.eC),{},{right:-1,top:-1,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:"#F2F2F2"}},axisLine:{show:!0,lineStyle:{color:"#DCDCDC"}},axisTick:{show:!1},axisLabel:{show:!0}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]},L=function(e){var n=e.seriesData,t=e.xAxisData,r=e.height,i=e.width,a=e.showEmpty,l=e.title,o=(0,y.useRef)(null),c=(0,y.useCallback)((function(e,n){for(var t,r=[],i=null===(t=o.current.chart)||void 0===t?void 0:t.convertToPixel("grid",n.value),a=s()(i,2),l=a[0],c=a[1],u=e.map((function(e){var n;return N()(N()({},e),{},{value:null===(n=o.current.chart)||void 0===n?void 0:n.convertToPixel("grid",e.value)})})),d=0;d<u.length;d++)if(n.name!==u[d].name){var f=s()(u[d].value,2),p=f[0],m=f[1];Math.sqrt(Math.pow(v().round(p-l,2),2)+Math.pow(v().round(m-c,2),2))<=16&&r.push(N()({},u[d]))}else r.push(N()({},u[d]));return r}),[]),u=(0,y.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var n;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(n=e.itemStyle)||void 0===n?void 0:n.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),d=(0,y.useMemo)((function(){var e=n.map((function(e,n){return N()(N()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return N()(N()({},P),{},{tooltip:{trigger:"item",borderWidth:0,formatter:function(n,t){var r=c(e,n.data),i="",a=u(r);return r.forEach((function(e){i+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(a?a(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper">'.concat(i,"</div>")}},title:N()(N()({},z.TN),{},{text:l}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[n,t,l,c]);return(0,R.jsx)(R.Fragment,{children:!n.length&&a?(0,R.jsx)(M.Z,{height:r,title:l}):(0,R.jsx)(Z.Z,{ref:o,height:r,options:d,width:i||"100%"})})},T=(0,y.memo)(L),A=t(16333),E=t(571),I=t(68940),O=t(19019),_=t(51076),D=t(77353),W=t(4423),H=t(66668),F=t(83603),G=t(23333),U=t(96938),K=t(47946),B=t(84777),J=(t(72183),t(2139)),V=t(9298),Y=(t(51662),t(10074),t(76483)),q=t(33883),$=t(25906),Q=t(69070),X=function(e){var n=e.textListCount,t=e.fileList,r=e.ghost,i=e.showIcon,a=void 0===i||i,l=e.onDelete,o=(0,f.useIntl)();return(0,R.jsx)("div",{className:"file-list",children:t.map((function(e,t){return(0,R.jsxs)("div",{className:g()("file-item",{ghost:r}),children:[(0,R.jsxs)("span",{className:"title",children:[(0,R.jsxs)("span",{className:"m-r-5",children:[t+1+n,"."]}),a&&(0,R.jsx)($.Z,{className:"m-r-5"}),(0,R.jsxs)(q.Z,{ghost:!0,children:[" ",e.name]})]}),l&&(0,R.jsx)(G.Z,{title:o.formatMessage({id:"common.button.delete"}),children:(0,R.jsx)(m.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,R.jsx)(Q.Z,{}),onClick:function(){return l(e.uid)}})})]},e.uid)}))})},ee=y.memo(X),ne=t(43337),te=t(19748),re=[],ie={},ae=(0,y.forwardRef)((function(e,n){var t=e.modelList,r=(0,y.useRef)(0),a=(0,f.useIntl)(),o=(0,I.Z)(),u=(0,f.useSearchParams)(),d=s()(u,1)[0].get("model")||"",p=(0,y.useState)({}),h=s()(p,2),x=h[0],v=h[1],b=(0,y.useState)(!1),w=s()(b,2),C=w[0],Z=w[1],z=(0,y.useState)(!1),M=s()(z,2),P=M[0],L=M[1],q=(0,y.useState)(null),$=s()(q,2),Q=$[0],X=$[1],ae=(0,y.useState)(!1),le=s()(ae,2),oe=le[0],se=le[1],ce=(0,y.useRef)(""),ue=(0,y.useRef)(null),de=(0,y.useRef)(null),fe=(0,y.useRef)(null),pe=(0,y.useRef)(0),me=(0,y.useRef)(null),he=(0,y.useState)([]),ge=s()(he,2),xe=ge[0],ve=ge[1],ye=(0,y.useState)("chart"),be=s()(ye,2),je=be[0],we=be[1],Ne=(0,y.useState)(180),Ce=s()(Ne,2),Se=Ce[0],ke=Ce[1],Ze=(0,y.useState)({code:"",copyValue:""}),ze=s()(Ze,2),Me=ze[0],Re=ze[1],Pe=(0,y.useState)(!1),Le=s()(Pe,2),Te=Le[0],Ae=Le[1],Ee=(0,y.useRef)(!0),Ie=(0,y.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),Oe=s()(Ie,2),_e=Oe[0],De=Oe[1],We=(0,y.useState)([]),He=s()(We,2),Fe=He[0],Ge=He[1],Ue=(0,E.Z)(),Ke=Ue.initialize,Be=Ue.updateScrollerPosition,Je=(0,E.Z)(),Ve=Je.initialize,Ye=(Je.updateScrollerPosition,(0,y.useRef)(null));(0,y.useImperativeHandle)(n,(function(){return{viewCode:function(){Z(!0)},setCollapse:function(){se(!oe)}}}));var qe=(0,y.useMemo)((function(){return[].concat(S()(_e),S()(xe)).length<2}),[_e,xe]),$e=(0,y.useCallback)((function(e){try{var n=e.map((function(e){return e.embedding})),t=new B._(n).predict(n,{nComponents:2}).to2DArray(),r=[].concat(S()(_e.map((function(e){return e.text})).filter((function(e){return e}))),S()(xe.map((function(e){return e.text})).filter((function(e){return e})))),i=t.map((function(e,n){return{value:e,name:n+1,text:r[n]}}));Ge(i);var a=e.map((function(e,n){return e.embedding=e.embedding.slice(0,5),e.embedding.push(null),e}));Re({code:JSON.stringify(a,null,2).replace(/null/g,"..."),copyValue:JSON.stringify(e,null,2)})}catch(e){}}),[_e,xe]),Qe=function(){r.current=r.current+1},Xe=function(){var e=l()(i()().mark((function e(n){var t,r,a,l,s,c,u,d,f;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=Ye.current)||void 0===t?void 0:t.form.validateFields();case 2:if(x.model){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,l=_e.filter((function(e){return e.text})),s=xe.filter((function(e){return e.text})),!((c=[].concat(S()(l.map((function(e){return e.text}))),S()(s.map((function(e){return e.text}))))).length<2)){e.next=11;break}return Ae(!0),e.abrupt("return");case 11:return De(l),ve(s),Ae(!1),L(!0),Qe(),X(null),null===(r=me.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),me.current=o(),ce.current=(null==n?void 0:n.content)||"",e.next=22,(0,j.xO)({model:x.model,encoding_format:"float",input:c},{token:me.current.token});case 22:u=e.sent,X(u.usage),d=u.data||[],$e(d),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(4),X({error:!0,errorMessage:null===(f=e.t0.response)||void 0===f||null===(f=f.data)||void 0===f||null===(f=f.error)||void 0===f?void 0:f.message});case 31:return e.prev=31,L(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[4,28,31,34]])})));return function(n){return e.apply(this,arguments)}}(),en=(0,y.useCallback)((function(e,n){if(Ee.current){var t=e.clipboardData.getData("text");if(t){var r=t.split("\n").map((function(e){var n;return{text:null==e?void 0:e.trim(),uid:null===(n=de.current)||void 0===n?void 0:n.setMessageId(),name:""}})),i=[].concat(S()(_e.slice(0,n)),S()(r),S()(_e.slice(n+1))).filter((function(e){return e.text}));De(i)}}}),[_e]),nn=(0,y.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,R.jsx)(T,{seriesData:Fe,height:Se,width:"100%",xAxisData:[]})},{key:"json",label:"JSON",children:(0,R.jsx)("div",{style:{padding:10,backgroundColor:"#fafafa"},children:(0,R.jsx)(A.Z,{height:Se-20,theme:"light",code:Me.code,copyValue:Me.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[Se,Fe,Me]);return(0,y.useEffect)((function(){Qe(),Ge([]),X(null)}),[x.model]),(0,y.useEffect)((function(){ue.current&&Ke(ue.current)}),[ue.current,Ke]),(0,y.useEffect)((function(){fe.current&&Ve(fe.current)}),[fe.current,Ve]),(0,y.useEffect)((function(){_e.length+xe.length>pe.current&&Be(),pe.current=_e.length+xe.length}),[_e.length,xe.length]),(0,R.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,R.jsxs)("div",{className:"ground-left",children:[(0,R.jsx)("div",{className:"center",ref:ue,style:{height:"auto",maxHeight:"100%"},children:(0,R.jsxs)("div",{className:"documents",children:[(0,R.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,R.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,R.jsx)("div",{className:"flex gap-20",children:(0,R.jsx)("span",{children:a.formatMessage({id:"playground.embedding.documents"})})})}),(0,R.jsxs)("div",{className:"flex-center gap-10",children:[(0,R.jsx)(m.ZP,{className:"flex-center",size:"middle",children:(0,R.jsx)(F.Z,{defaultChecked:Ee.current,onChange:function(e){Ee.current=e.target.checked},children:a.formatMessage({id:"playground.input.multiplePaste"})})}),(0,R.jsxs)(m.ZP,{size:"middle",onClick:function(){var e;null===(e=de.current)||void 0===e||e.handleAdd()},children:[(0,R.jsx)(O.Z,{}),a.formatMessage({id:"playground.embedding.addtext"})]}),(0,R.jsx)(m.ZP,{icon:(0,R.jsx)(_.Z,{}),size:"middle",onClick:function(){De([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),ve([]),Ge([]),X(null),Ae(!1)},children:a.formatMessage({id:"common.button.clear"})}),P?(0,R.jsx)(m.ZP,{style:{width:80},size:"middle",type:"primary",onClick:function(){var e,n;null===(e=me.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),L(!1)},icon:(0,R.jsx)(c.Z,{type:"icon-stop1",className:"font-size-12"}),children:a.formatMessage({id:"common.button.stop"})}):(0,R.jsx)(m.ZP,{size:"middle",type:"primary",disabled:qe,onClick:function(){Xe()},icon:(0,R.jsx)(D.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})]})]}),(0,R.jsxs)("div",{className:"docs-wrapper",children:[(0,R.jsx)(ne.Z,{ref:de,textList:_e,onChange:function(e){De(e)},onPaste:en}),(0,R.jsx)("div",{style:{marginTop:8},children:(0,R.jsx)(ee,{fileList:xe,textListCount:_e.length||0,onDelete:function(e){ve((function(n){return n.filter((function(n){return n.uid!==e}))}))}})}),Te&&(0,R.jsx)(k.Z,{type:"danger",message:"Please input at least two documents"})]})]})}),(0,R.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,R.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,R.jsxs)("div",{className:"flex gap-20",children:[(0,R.jsxs)("span",{className:"flex-center",children:[a.formatMessage({id:"playground.embedding.output"}),(0,R.jsx)(G.Z,{title:(0,R.jsxs)("span",{className:"flex-column",children:[(0,R.jsxs)("span",{children:["1.",a.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,R.jsxs)("span",{children:["2."," ",a.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,R.jsx)(W.Z,{className:"m-l-4"})})]}),(0,R.jsx)(k.Z,{type:"danger",message:null==Q?void 0:Q.errorMessage})]}),(0,R.jsx)(U.Z,{onChange:function(e){we(e)},value:je,options:[{label:a.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,R.jsx)("div",{className:"embed-chart",children:(0,R.jsx)(J.e,{enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,R.jsx)(G.Z,{title:a.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,R.jsx)(m.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,R.jsx)(H.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResizeStop:function(e,n,t,r){r.height+Se<=400&&r.height+Se>=180&&ke(r.height+Se)},children:(0,R.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",overflow:"hidden",width:"100%"},className:"scatter ",children:(0,R.jsx)(K.Z,{defaultActiveKey:je,activeKey:je,centered:!0,renderTabBar:function(){return(0,R.jsx)(R.Fragment,{})},items:nn})})})})]})]}),(0,R.jsx)("div",{className:g()("params-wrapper",{collapsed:oe}),ref:fe,children:(0,R.jsx)("div",{className:"box",children:(0,R.jsx)(Y.Z,{ref:Ye,setParams:v,paramsConfig:re,initialValues:ie,params:x,selectedModel:d,modelList:t})})}),(0,R.jsx)(te.Z,N()(N()({},V.NW.embeddings),{},{open:C,payLoad:{input:[].concat(S()(_e.map((function(e){return e.text})).filter((function(e){return e}))),S()(xe.map((function(e){return e.text})).filter((function(e){return e}))))},parameters:N()({},x),onCancel:function(){Z(!1)},title:a.formatMessage({id:"playground.viewcode"})}))]})})),le=(0,y.memo)(ae),oe=(t(20988),function(){var e=(0,f.useIntl)(),n=(0,y.useRef)(null),t=(0,y.useRef)(null),r=(0,y.useState)([]),a=s()(r,2),o=a[0],h=a[1],x=(0,y.useState)(!1),w=s()(x,2),N=w[0],C=w[1],S=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e)}),[t.current]),k=(0,y.useCallback)((function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),[t.current]);(0,y.useEffect)((function(){var e=function(){var e=l()(i()().mark((function e(){var n,t,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={embedding_only:!0,reranker:!1},e.next=4,(0,j.nb)(n);case 4:return t=e.sent,r=v().map(t.data||[],(function(e){return{value:e.id,label:e.id}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=l()(i()().mark((function n(){var t,r,a;return i()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([e()]);case 3:t=n.sent,r=s()(t,1),a=r[0],h(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),C(!0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[]);return(0,b.y1)(u.ZP.RIGHT.join(","),(function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.setCollapse)||void 0===t||t.call(e)}),{preventDefault:!0}),(0,R.jsx)(d._z,{ghost:!0,header:{title:e.formatMessage({id:"menu.playground.embedding"}),breadcrumb:{}},extra:(0,R.jsxs)(p.Z,{children:[(0,R.jsx)(m.ZP,{size:"middle",onClick:S,icon:(0,R.jsx)(c.Z,{type:"icon-code",className:"font-size-16"}),children:e.formatMessage({id:"playground.viewcode"})}),(0,R.jsx)(m.ZP,{size:"middle",onClick:k,icon:(0,R.jsx)(c.Z,{type:"icon-a-layout6-line",className:"font-size-16"})})]},"buttons"),className:g()("playground-container chat"),children:(0,R.jsx)("div",{className:"play-ground",children:(0,R.jsx)("div",{className:"chat",children:(0,R.jsx)(le,{ref:t,modelList:o,loaded:N})})})})})}}]);