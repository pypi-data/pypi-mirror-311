(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6050],{47201:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datastore-connection/new",function(){return n(56933)}])},56933:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var l=n(24246),s=n(69728),r=n(48382),i=n(5152),a=n(86677),o=n(27378),d=n(45007),c=n(44296),u=n(73485),x=n(11032),p=n(94167),h=n(38615),f=n(50204),m=n(10284),j=e=>{var t;let{disabled:n=!1,enableSorting:s=!0,hasClear:r=!0,label:a,list:d,onChange:c,selectedValue:u}=e,[x,p]=(0,o.useState)(!1),h=()=>{p(!1)},f=null===(t=[...d].find(e=>{let[,t]=e;return t.value===u}))||void 0===t?void 0:t[0],m=f?"text-purple-500":"text-gray-500";return(0,l.jsxs)(i.v2r,{isLazy:!0,onClose:h,onOpen:()=>{p(!0)},strategy:"fixed",children:[(0,l.jsx)(i.j2t,{"aria-label":null!=f?f:a,as:i.wpx,disabled:n,icon:(0,l.jsx)(i.mCO,{}),className:"hover:bg-none active:bg-none ".concat(m),"data-testid":"select-dropdown-btn",children:(0,l.jsx)(i.xvT,{noOfLines:1,wordBreak:"break-all",children:null!=f?f:a})}),x?(0,l.jsxs)(i.qyq,{lineHeight:"1rem",p:"0","data-testid":"select-dropdown-list",children:[r&&(0,l.jsx)(i.kCb,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:(0,l.jsx)(i.wpx,{onClick:()=>{c(void 0),h()},size:"small",children:"Clear"})}),(s?[...d].sort():[...d]).map(e=>{let[t,n]=e;return(0,l.jsx)(i.ua7,{"aria-label":n.toolTip,hasArrow:!0,label:n.toolTip,placement:"auto-start",openDelay:500,shouldWrapChildren:!0,children:(0,l.jsx)(i.sNh,{color:u===n.value?"complimentary.500":void 0,isDisabled:n.isDisabled,onClick:()=>c(n.value),paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,l.jsx)(i.xvT,{fontSize:"0.75rem",children:t})})},t)})]}):null]})},b=n(35894),g=()=>{let e=(0,d.I0)(),t=(0,o.useRef)(!1),n=(0,c.C)(s.pw);return(0,o.useEffect)(()=>(t.current=!0,()=>{e((0,s.zq)(b.gA)),t.current=!1}),[e]),(0,l.jsx)(i.xuv,{children:(0,l.jsx)(j,{enableSorting:!1,hasClear:!1,label:"Show all connectors",list:b.yI,onChange:t=>{e((0,s.zq)(t||b.gA))},selectedValue:n.system_type||b.gA})})},v=n(79894),y=n.n(v),C=e=>{let{items:t}=e;return(0,l.jsx)(i.MIq,{columns:4,spacingX:"16px",spacingY:"16px",children:t.map(e=>(0,l.jsx)(y(),{href:{pathname:window.location.pathname,query:{step:2,connectorType:JSON.stringify(e)}},children:(0,l.jsx)(i.xuv,{boxShadow:"base",borderRadius:"5px",maxWidth:"331px",overflow:"hidden",_hover:{boxShadow:"lg",cursor:"pointer"},"data-testid":"".concat(e.identifier,"-item"),children:(0,l.jsxs)(i.kCb,{alignItems:"center",justifyContent:"start",pl:"24px",pr:"24px",color:"gray.700",fontSize:"14px",fontStyle:"normal",fontWeight:"600",lineHeight:"20px",h:"80px",children:[(0,l.jsx)(r.Z,{data:e}),(0,l.jsx)(i.xvT,{ml:"12px",children:e.human_readable})]})})},e.identifier))})},T=()=>{let e=(0,d.I0)(),t=(0,o.useRef)(!1),{step:n}=(0,c.C)(s.ZZ),r=(0,c.C)(s.pw),{data:a,isFetching:u,isLoading:x,isSuccess:j}=(0,s.$I)(r),[b,v]=(0,o.useState)(!1),y=(0,o.useCallback)(t=>{(0===t.target.value.length||t.target.value.length>1)&&e((0,s.qP)(t.target.value))},[e]),T=(0,o.useMemo)(()=>(0,p.Ds)(y,250),[y]),S=(0,o.useMemo)(()=>(null==a?void 0:a.items)&&[...a.items].sort((e,t)=>e.human_readable>t.human_readable?1:-1),[a]);return(0,o.useEffect)(()=>(t.current=!0,()=>{e((0,s.qP)("")),t.current=!1}),[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.kCb,{minWidth:"fit-content",children:(0,l.jsx)(i.xuv,{color:"gray.700",fontSize:"14px",maxHeight:"80px",maxWidth:"474px",mb:"24px",children:n.description})}),(0,l.jsxs)(i.kCb,{alignItems:"center",gap:"4",mb:"24px",minWidth:"fit-content",children:[(0,l.jsx)(g,{}),(0,l.jsxs)(i.BZy,{size:"sm",children:[(0,l.jsx)(i.Z8_,{pointerEvents:"none",children:(0,l.jsx)(i.PTu,{color:"gray.300",h:"17px",w:"17px"})}),(0,l.jsx)(i.IIB,{autoComplete:"off",autoFocus:!0,borderRadius:"md",name:"search",onChange:T,placeholder:"Search integrations",size:"sm",type:"search"})]}),(0,l.jsx)(h.ZP,{scopes:[m.Sh.CONNECTOR_TEMPLATE_REGISTER],children:(0,l.jsx)(i.wpx,{onClick:()=>{v(!0)},type:"primary",htmlType:"submit","data-testid":"upload-btn",children:"Upload connector"})})]}),(0,l.jsx)(f.Z,{isOpen:b,onClose:()=>v(!1)}),(u||x)&&(0,l.jsx)(i.M5Y,{children:(0,l.jsx)(i.$jN,{})}),j&&S?(0,l.jsx)(C,{items:S}):null]})},S=n(36848),I=n(59201),w=n(4894),_=n(89468),k=()=>{let e=(0,d.I0)(),t=(0,o.useRef)(!1),[n,r]=(0,o.useState)(!1),{connection:a,connectionOption:u}=(0,c.C)(s.ZZ),x=b.IM.find(e=>e.type===(null==u?void 0:u.type)),[p,h]=(0,o.useState)(null==x?void 0:x.options[0]),f=()=>{r(!0)},j=(0,o.useMemo)(()=>()=>{let e=[];return(null==x?void 0:x.options)&&x.options.forEach(t=>{let n;switch(t){case b.H5.CONNECTOR_PARAMETERS:n={label:t,content:(0,l.jsx)(I.s,{onConnectionCreated:f})};break;case b.H5.DATASET_CONFIGURATION:n=(null==a?void 0:a.key)?{label:t,content:(0,l.jsx)(w.Z,{})}:void 0;break;case b.H5.DSR_CUSTOMIZATION:n=(null==a?void 0:a.key)?{label:t,content:(0,l.jsx)(_.Z,{})}:void 0}n&&e.push(n)}),e},[null==a?void 0:a.key,null==x?void 0:x.options]),g=(0,o.useCallback)(t=>{switch(t){case b.H5.DATASET_CONFIGURATION:case b.H5.DSR_CUSTOMIZATION:e((0,s.nj)(b.Ss[3]));break;case b.H5.CONNECTOR_PARAMETERS:default:e((0,s.nj)(b.Ss[2]))}h(t)},[e]);return(0,o.useEffect)(()=>(t.current=!0,()=>{t.current=!1,e((0,s.mc)())}),[e]),(0,o.useEffect)(()=>{(null==a?void 0:a.key)&&(g((null==u?void 0:u.type)!==m.Zi.MANUAL?b.H5.DATASET_CONFIGURATION:b.H5.DSR_CUSTOMIZATION),n&&r(!1))},[n,null==a?void 0:a.key,null==u?void 0:u.type,null==x?void 0:x.options,g]),(0,l.jsx)(i.gCW,{alignItems:"stretch",gap:"18px",children:(0,l.jsx)(S.Z,{data:j(),flexGrow:1,index:null==x?void 0:x.options.findIndex(e=>e===p),isLazy:!0})})},N=n(99377),E=()=>{let e=(0,d.I0)(),t=(0,a.useRouter)(),{connectorType:n,step:p}=t.query,{connection:h,connectionOption:f,step:m}=(0,c.C)(s.ZZ);(0,o.useEffect)(()=>{if(n&&e((0,s.yA)(JSON.parse(n))),t.query.step){let t=b.Ss.find(e=>e.stepId===Number(p));e((0,s.nj)(t||b.Ss[1]))}return!t.query.id&&(null==h?void 0:h.key)&&(0,N.S)(h.key,m.href),()=>{}},[null==h?void 0:h.key,n,p,e,t.query.id,t.query.step,m.href]);let j=(0,o.useCallback)(e=>{let t="";switch(e.stepId){case 2:case 3:t=e.label.replace("{identifier}",f.human_readable);break;default:t=e.label}return t},[f]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{backPath:x.JR}),(0,l.jsx)(i.X6q,{fontSize:"2xl",fontWeight:"semibold",maxHeight:"40px",mb:"4px",whiteSpace:"nowrap",children:(0,l.jsxs)(i.xuv,{alignItems:"center",display:"flex",children:[f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{data:f}),(0,l.jsx)(i.xvT,{ml:"8px",children:j(m)})]}),!f&&(0,l.jsx)(i.xvT,{children:j(m)})]})}),(()=>{switch(m.stepId){case 1:default:return(0,l.jsx)(T,{});case 2:case 3:return(0,l.jsx)(k,{})}})()]})},O=n(73025),A=()=>(0,l.jsx)(O.Z,{children:(0,l.jsx)(E,{})})}},function(e){e.O(0,[3005,4833,1735,3273,2888,9774,179],function(){return e(e.s=47201)}),_N_E=e.O()}]);