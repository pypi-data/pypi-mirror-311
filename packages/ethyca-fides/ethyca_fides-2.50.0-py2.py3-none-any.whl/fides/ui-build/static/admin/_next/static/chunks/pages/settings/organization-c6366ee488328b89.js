(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return i(59160)}])},43124:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var r=i(24246),n=i(5152),o=i(88038),a=i.n(o),s=i(86677);i(27378);var l=i(11596),d=i(72247),u=i(11032),c=()=>{let e=(0,s.useRouter)();return(0,r.jsx)(n.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(n.xuv,{children:[(0,r.jsxs)(n.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(n.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(n.wpx,{onClick:()=>{e.push(u.fz)},children:"Configure"})]}),(0,r.jsxs)(n.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:i,padded:o=!0,mainProps:u}=e,p=(0,l.hz)(),f=(0,s.useRouter)(),x="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(p.flags.privacyRequestsConfiguration&&x),{data:v}=(0,d.JE)(void 0,{skip:m}),{data:g}=(0,d.PW)(void 0,{skip:m}),h=p.flags.privacyRequestsConfiguration&&(!v||!g)&&x;return(0,r.jsxs)(n.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(n.kCb,{as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[h?(0,r.jsx)(c,{}):null,t]})]})}},38615:function(e,t,i){"use strict";i.d(t,{Tg:function(){return a}});var r=i(24246),n=i(44296),o=i(96451);let a=e=>(0,n.C)(o.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:i}=e;return a(t)?(0,r.jsx)(r.Fragment,{children:i}):null}},60136:function(e,t,i){"use strict";i.d(t,{D4:function(){return o.D4},MM:function(){return p},Ot:function(){return d},c6:function(){return n},cj:function(){return x},e$:function(){return s},fn:function(){return l},iC:function(){return f},nU:function(){return c},tB:function(){return u}});var r,n,o=i(41164);let a="An unexpected error occurred. Please try again.",s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,o.Bw)(e)){if((0,o.hE)(e.data))return e.data.detail;if((0,o.cz)(e.data)){var i;let t=null===(i=e.data.detail)||void 0===i?void 0:i[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,o.Dy)(e.data)||404===e.status&&(0,o.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function u(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,o.oK)(e))return{status:e.originalStatus,message:e.data};if((0,o.Bw)(e)){let{status:i}=e;return{status:i,message:s(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=n||(n={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let f={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},x=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},98198:function(e,t,i){"use strict";var r=i(24246),n=i(5152);t.Z=e=>{let{title:t,children:i,isOpen:o,onClose:a,...s}=e;return(0,r.jsxs)(n.u_l,{isOpen:o,onClose:a,isCentered:!0,scrollBehavior:"inside",size:"xl",...s,children:[(0,r.jsx)(n.ZAr,{}),(0,r.jsxs)(n.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,r.jsx)(n.xBx,{p:0,children:(0,r.jsx)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(n.X6q,{as:"h3",size:"sm",children:t})})}),(0,r.jsx)(n.fef,{pb:4,overflow:"auto",children:i})]})]})}},16781:function(e,t,i){"use strict";i.d(t,{MA:function(){return s},Vo:function(){return d},t5:function(){return l}});var r=i(24246),n=i(5152);let o=e=>{let{children:t}=e;return(0,r.jsxs)(n.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsx)("strong",{children:"Success:"})," ",t]})},a=e=>{let{children:t}=e;return(0,r.jsxs)(n.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},s={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=e=>{let t=(0,r.jsx)(o,{children:e});return{...s,description:t}},d=e=>{let t=(0,r.jsx)(a,{children:e});return{...s,description:t,status:"error"}}},59160:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return q}});var r=i(24246),n=i(38615),o=i(5152),a=i(11596),s=i(43124),l=i(98198),d=i(34090),u=i(27378),c=i(59389),p=i(9043),f=i(60136),x=i(16781),m=i(91664);let v={identifier:"",name:"",client_id:"",client_secret:""},g=e=>({...e}),h=c.Ry().shape({provider:c.Z_().required().label("Provider"),name:c.Z_().required().label("Name"),client_id:c.Z_().required().label("Client ID"),client_secret:c.Z_().required().label("Client Secret")});var j=e=>{let{openIDProvider:t,onSuccess:i,onClose:n}=e,[a]=(0,m.Qc)(),[s]=(0,m.oP)(),l=(0,u.useMemo)(()=>t?g(t):v,[t]),c=(0,o.pmc)(),j=async(e,t)=>{(e=>{if((0,f.D4)(e)){let t=(0,f.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");c((0,x.Vo)(t))}else c((0,x.t5)("SSO provider configuration saved.")),n(),t.resetForm({}),i&&i(e.data)})(l.id?await s(e):await a(e))},y=[{label:"Azure",value:"azure"},{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],b=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0})]}),k=()=>(0,r.jsx)(p.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),_=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,r.jsx)(d.J9,{initialValues:l,enableReinitialize:!0,onSubmit:j,validationSchema:h,children:e=>{let{dirty:t,isValid:i,values:a}=e;return(0,r.jsx)(d.l0,{"data-testid":"openIDProvider-form",children:(0,r.jsxs)(o.Kqy,{spacing:4,children:[(0,r.jsx)(p.AP,{name:"provider",label:"Provider",options:y,variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!l.id}),(0,r.jsx)(p.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(p.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"azure"===a.provider&&b(),"okta"===a.provider&&k(),"custom"===a.provider&&_(),(0,r.jsxs)(o.xuv,{textAlign:"right",children:[(0,r.jsx)(o.wpx,{htmlType:"button","data-testid":"cancel-btn",className:"mr-3",onClick:n,children:"Cancel"}),(0,r.jsx)(o.wpx,{htmlType:"submit",type:"primary",disabled:!t||!i,"data-testid":"save-btn",children:"Save"})]})]})})}})},y=e=>{let{isOpen:t,onClose:i}=e;return(0,r.jsx)(l.Z,{isOpen:t,onClose:i,title:"Add SSO Provider",children:(0,r.jsx)(j,{onClose:i})})},b=e=>{let{isOpen:t,onClose:i,openIDProvider:n}=e;return(0,r.jsx)(l.Z,{isOpen:t,onClose:i,title:"Edit SSO Provider",children:(0,r.jsx)(j,{openIDProvider:n,onClose:i})})},k=e=>{let{openIDProvider:t}=e,{onOpen:i,isOpen:n,onClose:a}=(0,o.qY0)(),{onOpen:s,isOpen:l,onClose:d}=(0,o.qY0)(),u=(0,o.pmc)(),[c]=(0,m.rB)(),p=async()=>{let e=await c(t.identifier);if((0,f.D4)(e)){u((0,x.Vo)((0,f.e$)(e.error))),d();return}u((0,x.t5)("SSO provider deleted successfully")),d()};return(0,r.jsxs)(o.xuv,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,r.jsxs)(o.xuv,{display:"flex",alignItems:"center",children:[(0,r.jsx)(o.Eep,{src:"/images/oauth-login/".concat(t.provider,".svg"),alt:"".concat(t.provider," icon"),width:"40px",height:"40px"}),(0,r.jsxs)(o.xuv,{display:"flex",flexDirection:"column",children:[(0,r.jsx)(o.xvT,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:t.name}),(0,r.jsx)(o.xvT,{fontSize:"medium",marginLeft:"16px",children:t.identifier})]})]}),(0,r.jsxs)(o.xuv,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,r.jsx)(o.wpx,{className:"mr-3",onClick:s,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,r.jsx)(o.wpx,{className:"mr-3",onClick:i,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,r.jsx)(b,{isOpen:n,onClose:a,openIDProvider:t}),(0,r.jsx)(o.cVQ,{isOpen:l,onClose:d,onConfirm:p,title:"Remove SSO provider",message:(0,r.jsx)(o.xvT,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},_=()=>{let{onOpen:e,isOpen:t,onClose:i}=(0,o.qY0)(),{data:n}=(0,m.qv)();return(0,r.jsxs)(o.xuv,{maxWidth:"600px",marginTop:"40px",children:[(0,r.jsxs)(o.X6q,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",n&&n.length<5&&(0,r.jsx)(o.wpx,{onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,r.jsx)(o.xvT,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==n?void 0:n.map(e=>(0,r.jsx)(k,{openIDProvider:e},e.identifier)),(0,r.jsx)(y,{isOpen:t,onClose:i})]})},C=i(36701);let S={description:"",fides_key:C.Av,name:""},R=e=>({...e}),w=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),z=c.Ry().shape({description:c.Z_().required().label("Description"),fides_key:c.Z_().required().label("Organization Fides Key"),name:c.Z_().required().label("Name")}),O=e=>{let{organization:t,onSuccess:i}=e,[n,a]=(0,C.$f)(),s=(0,u.useMemo)(()=>t?R(t):S,[t]),l=(0,o.pmc)(),c=async(e,t)=>{let r=w(e);(n=>{if((0,f.D4)(n)){let e=(0,f.e$)(n.error,"An unexpected error occurred while editing the organization. Please try again.");l((0,x.Vo)(e))}else l((0,x.t5)("Organization configuration saved.")),t.resetForm({values:e}),i&&i(r)})(await n(r))},m=!t||a.isLoading;return(0,r.jsx)(d.J9,{initialValues:s,enableReinitialize:!0,onSubmit:c,validationSchema:z,children:e=>{let{dirty:t,isValid:i}=e;return(0,r.jsx)(d.l0,{"data-testid":"organization-form",children:(0,r.jsxs)(o.Kqy,{spacing:4,children:[(0,r.jsx)(p.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,r.jsx)(p.j0,{id:"name",name:"name",label:"Name",disabled:m,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,r.jsx)(p.j0,{id:"description",name:"description",label:"Description",disabled:m,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,r.jsx)(o.xuv,{textAlign:"right",children:(0,r.jsx)(o.wpx,{htmlType:"submit",type:"primary",disabled:m||!t||!i,loading:m,"data-testid":"save-btn",children:"Save"})})]})})}})};var A=i(10284),q=()=>{let{data:e}=(0,C.GQ)(C.Av),{plus:t,flags:{ssoAuthentication:i}}=(0,a.hz)();return(0,r.jsx)(s.Z,{title:"Organization",children:(0,r.jsxs)(o.xuv,{"data-testid":"organization-management",children:[(0,r.jsx)(o.X6q,{marginBottom:4,fontSize:"2xl",children:"Organization Management"}),(0,r.jsxs)(o.xuv,{maxWidth:"600px",children:[(0,r.jsx)(o.xvT,{marginBottom:10,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,r.jsx)(o.xuv,{background:"gray.50",padding:2,children:(0,r.jsx)(O,{organization:e})}),i&&t&&(0,r.jsx)(n.ZP,{scopes:[A.Sh.OPENID_PROVIDER_CREATE],children:(0,r.jsx)(_,{})})]})]})})}},41164:function(e,t,i){"use strict";i.d(t,{Bw:function(){return a},D4:function(){return n},Dy:function(){return l},XD:function(){return d},cz:function(){return u},hE:function(){return s},oK:function(){return o}});var r=i(76649);let n=e=>"error"in e,o=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,r.Ln)({status:"number",data:{}},e),s=e=>(0,r.Ln)({detail:"string"},e),l=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),u=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,i){"use strict";i.d(t,{Ln:function(){return r}});let r=(e,t)=>o(e,t),n=Symbol("SOME"),o=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?n in e?e.some(e=>o(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>o(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,i])=>o(i,t[e]));class a{static narrow(e){return new a(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,i=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a(e=>t(e)&&i(e))}}new a(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);