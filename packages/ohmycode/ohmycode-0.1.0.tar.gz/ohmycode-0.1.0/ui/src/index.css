@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 5.9% 10%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* 代码块样式 */
pre {
  @apply p-4 bg-muted rounded-lg overflow-x-auto;
}

code {
  @apply font-mono text-sm;
}

/* Markdown 内容样式 */
.prose pre {
  @apply bg-muted;
}

.prose code {
  @apply text-sm px-1 py-0.5 rounded-md bg-muted;
}

.prose h1 {
  @apply text-3xl font-bold mt-8 mb-4;
}

.prose h2 {
  @apply text-2xl font-semibold mt-6 mb-3;
}

.prose h3 {
  @apply text-xl font-medium mt-4 mb-2;
}

.prose p {
  @apply my-4;
}

.prose ul {
  @apply list-disc list-inside;
}

.prose ol {
  @apply list-decimal list-inside;
}

.prose blockquote {
  @apply border-l-4 border-muted pl-4 italic;
}

.markdown-body {
  color: inherit;
}

.markdown-body pre {
  background-color: hsl(var(--muted));
  border: 1px solid hsl(var(--border));
  border-radius: 8px;
  padding: 1rem;
  margin: 1rem 0;
  overflow-x: auto;
}

.markdown-body code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.875em;
  background-color: hsl(var(--muted));
  padding: 0.2em 0.4em;
  border-radius: 4px;
}

.markdown-body pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  font-weight: 600;
  letter-spacing: -0.02em;
  line-height: 1.3;
  margin-top: 1.5em;
  margin-bottom: 0.8em;
}

.markdown-body h1 {
  font-size: 1.35em;
  background: linear-gradient(
    to right,
    hsl(var(--foreground)) 0%,
    hsl(var(--foreground)/0.8) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.markdown-body h2 {
  font-size: 1.25em;
  color: hsl(var(--foreground)/0.9);
}

.markdown-body h3 {
  font-size: 1.15em;
  color: hsl(var(--foreground)/0.8);
}

.markdown-body h4 {
  font-size: 1.1em;
  color: hsl(var(--foreground)/0.7);
  font-weight: 500;
}

.markdown-body h5 {
  font-size: 1em;
  color: hsl(var(--foreground)/0.6);
  font-weight: 500;
}

.markdown-body h6 {
  font-size: 0.95em;
  color: hsl(var(--foreground)/0.5);
  font-weight: 500;
}

/* 标题悬停效果 */
.markdown-body h1:hover,
.markdown-body h2:hover,
.markdown-body h3:hover,
.markdown-body h4:hover,
.markdown-body h5:hover,
.markdown-body h6:hover {
  color: hsl(var(--primary));
  transition: all 0.15s ease;
}

/* 特殊处理 h1 的悬停效果 */
.markdown-body h1:hover {
  background: linear-gradient(
    to right,
    hsl(var(--primary)) 0%,
    hsl(var(--primary)/0.8) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
}

.markdown-body p {
  margin: 1em 0;
  line-height: 1.6;
}

.markdown-body ul,
.markdown-body ol {
  margin: 1em 0;
  padding-left: 2em;
}

.markdown-body li {
  margin: 0.5em 0;
}

.markdown-body blockquote {
  margin: 1em 0;
  padding-left: 1em;
  color: hsl(var(--muted-foreground));
  border-left: 4px solid hsl(var(--border));
}

/* 代码高亮样式覆盖 */
.hljs {
  background: transparent !important;
  padding: 0 !important;
}

.markdown-body pre {
  position: relative;
  background-color: #1a1a1a !important; /* 终端黑色背景 */
}

.markdown-body pre code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
  font-size: 0.875em !important;
  line-height: 1.6 !important;
  color: #4af626 !important; /* 终端绿色文字 */
}

/* 有语言标识的代码块使用 highlight.js 的样式 */
.markdown-body pre code.hljs {
  color: inherit !important;
}

/* 暗色模式下的代码块背景 */
.dark .markdown-body pre:not(:has(code.hljs)) {
  background-color: #1a1a1a !important;
}

.dark .markdown-body pre:not(:has(code.hljs)) code {
  color: #4af626 !important;
}

/* 亮色模式下的代码块背景 */
.markdown-body pre:not(:has(code.hljs)) {
  background-color: #1a1a1a !important;
}

.markdown-body pre:not(:has(code.hljs)) code {
  color: #4af626 !important;
}

/* 内联代码样式 */
.markdown-body code:not(pre code) {
  color: inherit;
  background-color: hsl(var(--muted));
}

/* 历史记录列表卡片样式 */
.history-card {
  @apply relative flex flex-col gap-3 p-5 rounded-xl
         bg-gradient-to-b from-background to-card/95
         border border-border/40 shadow-sm
         transition-all duration-300 ease-out
         hover:shadow-xl hover:shadow-foreground/5
         hover:border-border/60 hover:-translate-y-0.5;
}

/* 卡片标题区域 */
.history-card-header {
  @apply flex items-center justify-between;
}

/* 时间戳样式 */
.history-timestamp {
  @apply text-sm text-muted-foreground/70
         tracking-tight font-medium
         bg-muted/20 dark:bg-muted/10
         px-2 py-0.5 rounded-md;
}

/* 命令文本容器 - 深色背景 */
.history-command-container {
  @apply relative mt-1 rounded-lg
         bg-muted/30 dark:bg-muted/10
         p-0.5 overflow-hidden;
}

/* 命令文本样式 - 更深的背景 */
.history-command {
  @apply font-mono text-sm px-3 py-2.5
         rounded-md 
         bg-muted/40 dark:bg-background/95
         text-foreground/90 font-medium
         overflow-x-auto whitespace-pre-wrap break-all
         border border-border/20;
}

/* 输出预览区域 - 浅色背景 */
.history-preview {
  @apply mt-3 text-sm text-muted-foreground/90
         line-clamp-2 hover:line-clamp-none
         transition-all duration-200
         px-3 py-2 rounded-lg
         bg-muted/20 dark:bg-muted/5;
}

/* 操作按钮容器 */
.history-actions {
  @apply flex items-center gap-2 mt-3 px-1
         opacity-0 transition-all duration-200
         group-hover:opacity-100 group-hover:translate-y-0
         translate-y-1;
}

/* 操作按钮 - 突出显示 */
.history-action-btn {
  @apply inline-flex items-center justify-center 
         h-8 px-3 text-sm font-medium
         rounded-md 
         bg-card dark:bg-muted/20
         hover:bg-accent hover:text-accent-foreground
         border border-border/20
         transition-all duration-200
         focus-visible:outline-none focus-visible:ring-2
         focus-visible:ring-ring focus-visible:ring-offset-2
         disabled:pointer-events-none disabled:opacity-50;
}

/* 标签样式 - 更突出的设计 */
.history-tag {
  @apply inline-flex items-center rounded-full
         px-2.5 py-0.5 text-xs font-semibold
         bg-primary/10 text-primary
         border border-primary/20
         shadow-sm shadow-primary/5
         transition-colors duration-200;
}

/* 卡片悬停渐变效果 */
.history-card::before {
  content: "";
  @apply absolute inset-0 rounded-xl
         bg-gradient-to-br from-primary/5 via-transparent to-primary/5
         opacity-0 transition-opacity duration-300
         pointer-events-none -z-10;
}

.history-card:hover::before {
  @apply opacity-100;
}

/* 暗色模式优化 */
.dark .history-card {
  @apply from-card/95 to-background
         hover:shadow-primary/10;
}

.dark .history-command {
  @apply text-foreground/95
         shadow-inner shadow-background/60;
}

.dark .history-preview {
  @apply text-foreground/80
         shadow-inner shadow-background/40;
}

/* 滚动条美化 */
.history-command::-webkit-scrollbar {
  @apply h-1.5 w-1.5;
}

.history-command::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.history-command::-webkit-scrollbar-thumb {
  @apply bg-foreground/10 rounded-full
         hover:bg-foreground/20
         transition-colors duration-200;
}

/* 加载动画 */
.history-loading {
  @apply animate-pulse bg-muted/50;
}

/* 空状态样式 */
.history-empty {
  @apply flex flex-col items-center justify-center gap-4 p-8
         text-muted-foreground/80 bg-muted/30
         rounded-lg border border-dashed border-border/50;
}
